<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>eSIM SEO æ ‡é¢˜ç”Ÿæˆå™¨</title>
<style>
*{box-sizing:border-box;margin:0;padding:0}
:root{
  --pri:#2563eb;--pri-dark:#1d4ed8;--pri-light:#eff6ff;
  --success:#10b981;--warn:#f59e0b;
  --bg:#f0f4f8;--card:#fff;--border:#e2e8f0;
  --text:#1e293b;--muted:#64748b;--light:#f8fafc;
  --pur:#7c3aed;--pur-dark:#5b21b6;--pur-light:#f5f3ff;
  --kw-title:#1d4ed8;--kw-content:#15803d;--kw-supp:#64748b;
}
body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","PingFang SC","Microsoft YaHei",sans-serif;background:var(--bg);color:var(--text);min-height:100vh;font-size:14px}
.header{background:linear-gradient(135deg,#0f2460 0%,#1e3a8a 40%,#2563eb 80%,#3b82f6 100%);color:#fff;padding:18px 28px;display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;box-shadow:0 2px 16px rgba(37,99,235,.35)}
.hd-left h1{font-size:19px;font-weight:800;letter-spacing:-.5px;display:flex;align-items:center;gap:8px}
.hd-left p{font-size:11.5px;opacity:.78;margin-top:4px}
.hd-stats{display:flex;gap:8px;flex-wrap:wrap}
.stat-pill{background:rgba(255,255,255,.15);border:1px solid rgba(255,255,255,.22);padding:5px 13px;border-radius:20px;font-size:12px;font-weight:600}
.stat-pill b{color:#fcd34d}
.main{max-width:1060px;margin:0 auto;padding:18px 14px}

/* ===== Keyword Panel ===== */
.kw-panel{background:var(--card);border-radius:14px;box-shadow:0 1px 8px rgba(0,0,0,.07);margin-bottom:16px;overflow:hidden;border:2px solid transparent;transition:border-color .25s}
.kw-panel.has-kws{border-color:#fde68a}
.kw-panel-hd{padding:13px 20px;background:linear-gradient(135deg,#fffbeb,#fef3c7);border-bottom:1px solid #fde68a;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:8px;cursor:pointer;user-select:none;transition:background .18s}
.kw-panel-hd:hover{background:linear-gradient(135deg,#fef3c7,#fde68a)}
.kw-hd-l{display:flex;align-items:center;gap:9px;flex-wrap:wrap}
.kw-hd-title{font-size:14px;font-weight:700;color:#92400e;display:flex;align-items:center;gap:7px}
.kw-badge{background:#f59e0b;color:#fff;font-size:11px;font-weight:700;padding:3px 10px;border-radius:12px}
.kw-hd-r{display:flex;gap:8px;align-items:center}
.kw-toggle-btn{background:#f59e0b;color:#fff;border:none;border-radius:7px;padding:6px 13px;font-size:12px;font-weight:600;cursor:pointer;transition:background .18s}
.kw-toggle-btn:hover{background:#d97706}

.kw-stats-bar{padding:10px 20px;background:#fffef7;border-bottom:1px solid #fde68a;display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.kw-stat{display:flex;align-items:center;gap:5px;background:#fff;border:1.5px solid var(--border);border-radius:8px;padding:4px 12px;font-size:12px;font-weight:600}
.kw-stat .n{font-size:15px;font-weight:800}
.kw-stat .n.blue{color:var(--pri)}.kw-stat .n.green{color:var(--success)}.kw-stat .n.pur{color:var(--pur)}.kw-stat .n.gray{color:var(--muted)}.kw-stat .n.amber{color:#d97706}

.kw-input-section{padding:16px 22px;background:#fffef0;border-bottom:1px solid #fde68a}
.kw-input-tip{font-size:11.5px;color:#92400e;margin-bottom:8px;display:flex;align-items:flex-start;gap:6px;line-height:1.55}
.kw-textarea{width:100%;padding:11px 13px;border:1.5px solid #fcd34d;border-radius:9px;font-size:12.5px;resize:vertical;outline:none;min-height:110px;font-family:'Consolas','Monaco',monospace;transition:border-color .2s,box-shadow .2s;background:#fffef7;line-height:1.7;color:var(--text)}
.kw-textarea:focus{border-color:#f59e0b;box-shadow:0 0 0 3px rgba(245,158,11,.15)}
.kw-input-btns{display:flex;gap:8px;margin-top:10px;align-items:center;flex-wrap:wrap}
.btn-amber{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;box-shadow:0 3px 10px rgba(245,158,11,.28)}
.btn-amber:hover{background:linear-gradient(135deg,#d97706,#b45309);transform:translateY(-1px);box-shadow:0 5px 16px rgba(245,158,11,.38)}
.kw-input-hint{font-size:11px;color:var(--muted);margin-left:4px}

.kw-tag-area{padding:14px 20px}
.kw-legend{display:flex;align-items:center;gap:16px;margin-bottom:10px;flex-wrap:wrap}
.kw-leg{display:flex;align-items:center;gap:5px;font-size:11.5px;font-weight:600}
.kw-dot{width:10px;height:10px;border-radius:50%;flex-shrink:0}
.dot-t{background:#3b82f6}.dot-c{background:#10b981}.dot-s{background:#94a3b8}
.kw-leg.title-l{color:var(--kw-title)}.kw-leg.content-l{color:var(--kw-content)}.kw-leg.supp-l{color:var(--kw-supp)}

.kw-cloud-wrap{max-height:200px;overflow-y:auto;padding:4px 0;scrollbar-width:thin;scrollbar-color:#fcd34d #fffef7}
.kw-cloud-wrap::-webkit-scrollbar{width:5px}.kw-cloud-wrap::-webkit-scrollbar-track{background:#fffef7}.kw-cloud-wrap::-webkit-scrollbar-thumb{background:#fcd34d;border-radius:3px}
.kw-cloud{display:flex;flex-wrap:wrap;gap:6px}
.kw-tag{display:inline-flex;padding:4px 10px;border-radius:14px;font-size:11.5px;font-weight:500;cursor:default;transition:transform .15s,box-shadow .15s;border:1.5px solid transparent;white-space:nowrap;line-height:1.3}
.kw-tag:hover{transform:scale(1.05);box-shadow:0 2px 8px rgba(0,0,0,.1)}
.kw-tag.tt{background:#dbeafe;border-color:#93c5fd;color:#1d4ed8;font-weight:700}
.kw-tag.ct{background:#dcfce7;border-color:#86efac;color:#15803d;font-weight:600}
.kw-tag.at{background:#ede9fe;border-color:#c4b5fd;color:#5b21b6}
.kw-tag.st{background:#f1f5f9;border-color:#cbd5e1;color:#64748b}

/* ===== Controls ===== */
.ctrl-panel{background:var(--card);border-radius:14px;padding:18px 22px;box-shadow:0 1px 8px rgba(0,0,0,.07);margin-bottom:16px;display:flex;gap:12px;align-items:flex-end;flex-wrap:wrap}
.cg{display:flex;flex-direction:column;gap:5px}
.cg label{font-size:10.5px;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:.7px}
select{padding:9px 11px;border:1.5px solid var(--border);border-radius:8px;font-size:13px;color:var(--text);outline:none;cursor:pointer;background:#fff;transition:border-color .2s;min-width:128px}
select:focus{border-color:var(--pri)}
.btn-row{display:flex;gap:8px;align-items:flex-end;flex-wrap:wrap}
.btn{display:inline-flex;align-items:center;gap:6px;padding:9px 17px;border-radius:8px;font-size:13px;font-weight:600;cursor:pointer;border:none;transition:all .2s;white-space:nowrap}
.btn-pri{background:linear-gradient(135deg,var(--pri),var(--pri-dark));color:#fff;padding:11px 24px;font-size:14px;box-shadow:0 3px 10px rgba(37,99,235,.32)}
.btn-pri:hover{transform:translateY(-1px);box-shadow:0 5px 16px rgba(37,99,235,.42)}
.btn-pri:active{transform:translateY(0)}
.btn-out{background:#fff;color:var(--muted);border:1.5px solid var(--border)}
.btn-out:hover{border-color:var(--pri);color:var(--pri);background:var(--pri-light)}
.btn-green{background:var(--success);color:#fff}
.btn-green:hover{background:#059669;transform:translateY(-1px)}
.btn-purple{background:linear-gradient(135deg,var(--pur),var(--pur-dark));color:#fff;box-shadow:0 3px 10px rgba(124,58,237,.28)}
.btn-purple:hover{background:linear-gradient(135deg,#6d28d9,#4c1d95);transform:translateY(-1px);box-shadow:0 5px 16px rgba(124,58,237,.42)}

/* ===== Output ===== */
.ocard{background:var(--card);border-radius:14px;box-shadow:0 1px 8px rgba(0,0,0,.07);margin-bottom:16px;overflow:hidden}
.card-hd{padding:13px 20px;background:var(--light);border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:8px}
.card-hd-l{display:flex;align-items:center;gap:9px}
.card-hd-r{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.gen-badge{background:var(--pri);color:#fff;font-size:11px;font-weight:700;padding:3px 10px;border-radius:12px}
.kw-used-badge{background:#f59e0b;color:#fff;font-size:11px;font-weight:700;padding:3px 10px;border-radius:12px}
.card-title{font-size:14px;font-weight:700;color:#374151}
.card-body{padding:20px 22px}
.card-ft{padding:12px 20px;background:var(--light);border-top:1px solid var(--border);display:flex;gap:8px;flex-wrap:wrap}
.empty{text-align:center;padding:52px 20px;color:var(--muted)}
.empty-ico{font-size:50px;margin-bottom:14px}
.empty h3{font-size:16px;color:#374151;margin-bottom:6px}
.empty p{font-size:13px}
.h1-block{background:linear-gradient(135deg,#eff6ff,#dbeafe);border:2px solid #93c5fd;border-radius:12px;padding:15px 16px;margin-bottom:18px;display:flex;align-items:flex-start;gap:11px}
.h1-lbl{flex-shrink:0;background:var(--pri);color:#fff;font-size:10px;font-weight:800;padding:3px 8px;border-radius:5px;margin-top:4px;letter-spacing:.5px}
.h1-txt{flex:1;font-size:16.5px;font-weight:700;color:#1e3a8a;line-height:1.45}
.h1-len{font-size:10px;color:#3b82f6;font-weight:600;margin-top:4px}
.h1-copy{flex-shrink:0;background:#fff;color:var(--pri);border:1.5px solid var(--pri);border-radius:7px;padding:5px 10px;font-size:11.5px;cursor:pointer;transition:all .2s;margin-top:2px}
.h1-copy:hover{background:var(--pri);color:#fff}
.h2-hd{font-size:10.5px;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:.7px;margin-bottom:10px}
.h2-list{display:flex;flex-direction:column;gap:8px}
.h2-item{display:flex;align-items:flex-start;gap:10px;padding:11px 13px;border:1.5px solid var(--border);border-radius:10px;transition:all .18s}
.h2-item:hover{border-color:#93c5fd;background:#f0f9ff;box-shadow:0 2px 8px rgba(37,99,235,.07)}
.h2-num{width:25px;height:25px;background:var(--pri);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:800;flex-shrink:0;margin-top:3px}
.h2-body{flex:1;min-width:0}
.cat-tag{font-size:10px;font-weight:700;color:#fff;padding:2px 8px;border-radius:10px;display:inline-block;margin-bottom:4px;letter-spacing:.3px}
.h2-txt{font-size:13.5px;color:var(--text);line-height:1.45}
.h2-len{font-size:10px;color:var(--muted);margin-top:3px}
.h2-copy{flex-shrink:0;background:none;border:1px solid var(--border);border-radius:6px;padding:4px 8px;font-size:11px;color:var(--muted);cursor:pointer;transition:all .2s;margin-top:2px}
.h2-copy:hover{border-color:var(--pri);color:var(--pri);background:var(--pri-light)}
.c-pur{background:#f97316}.c-act{background:#8b5cf6}.c-pri{background:#ef4444}
.c-cov{background:#10b981}.c-faq{background:#3b82f6}.c-cmp{background:#6366f1}
.c-pvd{background:#ec4899}.c-scn{background:#14b8a6}.c-tip{background:#f59e0b}
.seo-bar{display:flex;gap:8px;margin-bottom:18px;flex-wrap:wrap}
.seo-tag{display:flex;align-items:center;gap:4px;background:#f0fdf4;border:1px solid #bbf7d0;color:#15803d;padding:4px 10px;border-radius:8px;font-size:11px;font-weight:600}
.seo-tag.warn{background:#fffbeb;border-color:#fde68a;color:#92400e}

/* ===== Keyword info in output ===== */
.kw-info-bar{background:linear-gradient(135deg,#fffbeb,#fef3c7);border:2px solid #fde68a;border-radius:12px;padding:12px 16px;margin-bottom:18px;display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap}
.kw-info-l{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.kw-info-title{font-size:13px;font-weight:700;color:#92400e}
.kw-used-tag{background:#fff;border:1.5px solid #fcd34d;border-radius:8px;padding:3px 9px;font-size:11px;font-weight:600;color:#92400e}
.kw-used-tag.used{border-color:#93c5fd;background:#dbeafe;color:#1d4ed8}
.kw-used-tag.green{border-color:#86efac;background:#dcfce7;color:#15803d}

/* ===== History ===== */
.hist-outer{background:var(--card);border-radius:14px;box-shadow:0 1px 8px rgba(0,0,0,.07);overflow:hidden}
.hist-toggle{padding:13px 20px;background:var(--light);border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;cursor:pointer;user-select:none}
.hist-toggle:hover{background:#f1f5f9}
.hist-toggle h3{font-size:14px;font-weight:700;color:#374151}
.hist-content{padding:14px;display:none}
.hist-content.open{display:block}
.hist-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(270px,1fr));gap:9px}
.hist-item{border:1.5px solid var(--border);border-radius:10px;padding:12px 14px;cursor:pointer;transition:all .18s}
.hist-item:hover{border-color:var(--pri);background:var(--pri-light);transform:translateY(-2px);box-shadow:0 4px 12px rgba(37,99,235,.1)}
.hist-num{font-size:10.5px;font-weight:700;color:var(--pri);margin-bottom:5px}
.hist-h1{font-size:12.5px;font-weight:600;color:var(--text);line-height:1.35;margin-bottom:6px}
.hist-prev{font-size:11px;color:var(--muted);line-height:1.65}

/* ===== Prompt Banner in output ===== */
.prompt-banner{background:linear-gradient(135deg,#f5f3ff,#ede9fe);border:2px solid #c4b5fd;border-radius:12px;padding:13px 16px;margin-top:18px;display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
.pb-txt{font-size:13px;color:#5b21b6;font-weight:600;display:flex;align-items:center;gap:7px}
.pb-sub{font-size:11px;color:#7c3aed;font-weight:400;margin-top:2px;opacity:.85}

/* ===== Prompt Modal ===== */
.modal-overlay{position:fixed;inset:0;background:rgba(15,23,42,.68);backdrop-filter:blur(5px);z-index:2000;display:flex;align-items:center;justify-content:center;padding:16px;opacity:0;pointer-events:none;transition:opacity .25s}
.modal-overlay.open{opacity:1;pointer-events:all}
.modal-box{background:#fff;border-radius:18px;width:100%;max-width:860px;max-height:92vh;display:flex;flex-direction:column;box-shadow:0 24px 80px rgba(0,0,0,.3);transform:translateY(22px) scale(.98);transition:transform .28s cubic-bezier(.34,1.56,.64,1)}
.modal-overlay.open .modal-box{transform:translateY(0) scale(1)}
.modal-hd{padding:16px 20px 14px;border-bottom:1px solid #e9d5ff;display:flex;align-items:center;justify-content:space-between;background:linear-gradient(135deg,#f5f3ff,#ede9fe);border-radius:18px 18px 0 0;flex-shrink:0;gap:10px;flex-wrap:wrap}
.modal-hd-l h3{font-size:16px;font-weight:800;color:#4c1d95}
.modal-hd-l p{font-size:11.5px;color:#7c3aed;opacity:.82;margin-top:2px}
.modal-hd-r{display:flex;gap:8px;align-items:center}
.modal-close-btn{background:none;border:none;width:30px;height:30px;border-radius:8px;cursor:pointer;font-size:16px;color:#6b7280;display:flex;align-items:center;justify-content:center;transition:all .18s}
.modal-close-btn:hover{background:#e9d5ff;color:#5b21b6}
.modal-info-bar{padding:10px 20px;background:#faf9ff;border-bottom:1px solid #e9d5ff;display:flex;gap:8px;flex-wrap:wrap;flex-shrink:0}
.p-stat{background:var(--pur-light);border:1px solid #c4b5fd;color:#5b21b6;padding:4px 11px;border-radius:8px;font-size:11px;font-weight:700}
.p-stat.amber{background:#fffbeb;border-color:#fde68a;color:#92400e}
.modal-tips{padding:8px 20px;background:#fffbeb;border-bottom:1px solid #fde68a;display:flex;align-items:center;gap:7px;flex-shrink:0}
.modal-tips span{font-size:11.5px;color:#92400e;font-weight:500}
.modal-body{flex:1;overflow-y:auto;padding:16px 20px}
.prompt-ta{width:100%;padding:14px 16px;border:2px solid #c4b5fd;border-radius:12px;font-size:12.5px;line-height:1.75;color:#1e293b;font-family:'Consolas','Monaco','Courier New',monospace;resize:vertical;background:#faf9ff;outline:none;min-height:420px;transition:border-color .2s,box-shadow .2s}
.prompt-ta:focus{border-color:var(--pur);box-shadow:0 0 0 3px rgba(124,58,237,.14)}
.modal-ft{padding:13px 20px;border-top:1px solid #e9d5ff;display:flex;gap:8px;align-items:center;flex-wrap:wrap;background:#faf9ff;border-radius:0 0 18px 18px;flex-shrink:0}
.modal-ft-hint{margin-left:auto;font-size:11px;color:#9ca3af;font-style:italic}

.toast{position:fixed;bottom:22px;right:22px;background:#1e293b;color:#fff;padding:10px 17px;border-radius:10px;font-size:13px;font-weight:500;z-index:9999;transform:translateY(70px);opacity:0;transition:all .3s ease;pointer-events:none;box-shadow:0 4px 16px rgba(0,0,0,.2)}
.toast.show{transform:translateY(0);opacity:1}

@media(max-width:640px){
  .header{padding:13px 14px}.hd-left h1{font-size:16px}
  .main{padding:10px 9px}.ctrl-panel{padding:13px 14px}.card-body{padding:14px 15px}
  .h1-txt{font-size:14.5px}.h2-txt{font-size:13px}.hist-grid{grid-template-columns:1fr}
  .btn-pri{padding:9px 18px;font-size:13px}.modal-box{max-height:95vh;border-radius:14px}
  .modal-hd{border-radius:14px 14px 0 0}.modal-ft{border-radius:0 0 14px 14px}
  .kw-cloud-wrap{max-height:150px}
}
</style>
</head>
<body>

<div class="header">
  <div class="hd-left">
    <h1>ğŸŒ eSIM SEO æ ‡é¢˜ç”Ÿæˆå™¨</h1>
    <p>åŸºäºæœç´¢æ„å›¾ä¼˜åŒ– Â· 9å¤§åˆ†ç±» Â· 40å¥—H1æ¨¡æ¿ Â· 117æ¡H2æ¨¡æ¿ Â· å…³é”®è¯æ™ºèƒ½æ¤å…¥ Â· ä¸€é”®ç”ŸæˆSEOå†™ä½œPrompt</p>
  </div>
  <div class="hd-stats">
    <div class="stat-pill">å·²ç”Ÿæˆ <b id="sGenCount">0</b> ç»„</div>
    <div class="stat-pill">å…³é”®è¯åº“ <b id="sKwCount">0</b> ä¸ª</div>
    <div class="stat-pill">H1æ¨¡æ¿ <b>40</b> å¥—</div>
    <div class="stat-pill">H2æ¨¡æ¿ <b>117</b> æ¡</div>
  </div>
</div>

<div class="main">

  <!-- ===== Keyword Panel ===== -->
  <div class="kw-panel" id="kwPanel">
    <div class="kw-panel-hd" onclick="toggleKwPanel()">
      <div class="kw-hd-l">
        <span class="kw-hd-title">ğŸ”‘ é«˜æµé‡å…³é”®è¯åº“</span>
        <span class="kw-badge" id="kwBadge" style="display:none">å·²å¯¼å…¥ 0 ä¸ª</span>
        <span id="kwNoKwHint" style="font-size:12px;color:#92400e;font-style:italic">â† ç²˜è´´æ‚¨çš„200ä¸ªå…³é”®è¯ï¼Œè‡ªåŠ¨æ¤å…¥æ ‡é¢˜ä¸Prompt</span>
      </div>
      <div class="kw-hd-r">
        <button class="kw-toggle-btn" id="kwToggleBtn">â–¼ å±•å¼€</button>
      </div>
    </div>

    <!-- Stats bar -->
    <div class="kw-stats-bar" id="kwStatsBar" style="display:none">
      <div class="kw-stat"><span>æ€»è®¡</span><span class="n amber" id="statTotal">0</span><span>ä¸ª</span></div>
      <div class="kw-stat"><span>ğŸ”µ æ ‡é¢˜å·²æ¤å…¥</span><span class="n blue" id="statTitle">0</span><span>ä¸ª</span></div>
      <div class="kw-stat"><span>ğŸŸ¢ å†…å®¹é‡ç‚¹è¯</span><span class="n green" id="statContent">0</span><span>ä¸ª</span></div>
      <div class="kw-stat"><span>ğŸŸ£ è¾…åŠ©è¯</span><span class="n pur" id="statAux">0</span><span>ä¸ª</span></div>
      <div class="kw-stat"><span>âš« è¡¥å……è¯åº“</span><span class="n gray" id="statSupp">0</span><span>ä¸ª</span></div>
    </div>

    <!-- Input section (collapsible) -->
    <div id="kwInputSection" style="display:none">
      <div class="kw-input-section">
        <div class="kw-input-tip">
          ğŸ’¡ æ¯è¡Œä¸€ä¸ªå…³é”®è¯ï¼Œæˆ–ç”¨é€—å·/åˆ†å·åˆ†éš”ï¼›æœ€å¤š200ä¸ªï¼›æ”¯æŒä¸­è‹±æ–‡æ··åˆã€‚
          å¯¼å…¥åå…³é”®è¯å°†è‡ªåŠ¨ï¼šâ‘ æ¤å…¥H1/H2æ ‡é¢˜ â‘¡åˆ†ç±»æ˜¾ç¤º â‘¢å†™å…¥Promptå†™ä½œæŒ‡ä»¤
        </div>
        <textarea class="kw-textarea" id="kwTextarea" placeholder="è¯·ç²˜è´´æ‚¨çš„é«˜æµé‡å…³é”®è¯ï¼Œä¾‹å¦‚ï¼š&#10;best esim for usa&#10;usa esim 2026&#10;cheap esim united states&#10;t-mobile esim travel&#10;buy esim online usa&#10;...ï¼ˆæ¯è¡Œä¸€ä¸ªï¼Œæˆ–é€—å·åˆ†éš”ï¼‰"></textarea>
        <div class="kw-input-btns">
          <button class="btn btn-amber" onclick="parseKeywords()">âœ… è§£æå¯¼å…¥å…³é”®è¯</button>
          <button class="btn btn-out" onclick="clearKeywords()">ğŸ—‘ æ¸…ç©º</button>
          <button class="btn btn-out" onclick="exportKeywords()" id="btnExportKw" style="display:none">ğŸ“¤ å¯¼å‡ºå…³é”®è¯</button>
          <span class="kw-input-hint" id="kwParseHint"></span>
        </div>
      </div>
      <!-- Tag cloud inside expanded panel -->
      <div class="kw-tag-area" id="kwTagAreaExpanded" style="display:none">
        <div class="kw-legend">
          <span style="font-size:12px;font-weight:700;color:#92400e;margin-right:4px">å…³é”®è¯åˆ†ç±»ï¼š</span>
          <span class="kw-leg title-l"><span class="kw-dot dot-t"></span>å·²æ¤å…¥æ ‡é¢˜</span>
          <span class="kw-leg content-l"><span class="kw-dot dot-c"></span>å†…å®¹é‡ç‚¹è¯ï¼ˆå‰25ä¸ªï¼‰</span>
          <span class="kw-leg" style="color:var(--pur)"><span class="kw-dot" style="background:#8b5cf6"></span>è¾…åŠ©è¯ï¼ˆ26-60ï¼‰</span>
          <span class="kw-leg supp-l"><span class="kw-dot dot-s"></span>è¡¥å……è¯åº“ï¼ˆ61+ï¼‰</span>
        </div>
        <div class="kw-cloud-wrap"><div class="kw-cloud" id="kwCloudExpanded"></div></div>
      </div>
    </div>

    <!-- Tag cloud always visible when keywords loaded -->
    <div class="kw-tag-area" id="kwTagAreaAlways" style="display:none">
      <div class="kw-legend">
        <span style="font-size:12px;font-weight:700;color:#92400e;margin-right:4px">å…³é”®è¯çŠ¶æ€ï¼š</span>
        <span class="kw-leg title-l"><span class="kw-dot dot-t"></span>æ ‡é¢˜å·²æ¤å…¥</span>
        <span class="kw-leg content-l"><span class="kw-dot dot-c"></span>å†…å®¹é‡ç‚¹è¯</span>
        <span class="kw-leg" style="color:var(--pur)"><span class="kw-dot" style="background:#8b5cf6"></span>è¾…åŠ©è¯</span>
        <span class="kw-leg supp-l"><span class="kw-dot dot-s"></span>è¡¥å……è¯åº“</span>
      </div>
      <div class="kw-cloud-wrap"><div class="kw-cloud" id="kwCloudAlways"></div></div>
    </div>
  </div>

  <!-- ===== Control Panel ===== -->
  <div class="ctrl-panel">
    <div class="cg">
      <label>ç›®æ ‡åœ°åŒº</label>
      <select id="selDest">
        <option value="usa">ğŸ‡ºğŸ‡¸ ç¾å›½</option>
        <option value="uk">ğŸ‡¬ğŸ‡§ è‹±å›½</option>
        <option value="japan">ğŸ‡¯ğŸ‡µ æ—¥æœ¬</option>
        <option value="europe">ğŸ‡ªğŸ‡º æ¬§æ´²</option>
        <option value="thailand">ğŸ‡¹ğŸ‡­ æ³°å›½</option>
        <option value="korea">ğŸ‡°ğŸ‡· éŸ©å›½</option>
      </select>
    </div>
    <div class="cg">
      <label>å¹´ä»½</label>
      <select id="selYear">
        <option value="2026">2026</option>
        <option value="2025">2025</option>
      </select>
    </div>
    <div class="cg">
      <label>H2 æ•°é‡</label>
      <select id="selH2n">
        <option value="10">10 ä¸ª</option>
        <option value="8">8 ä¸ª</option>
        <option value="12">12 ä¸ª</option>
      </select>
    </div>
    <div class="cg">
      <label>ç”Ÿæˆæ‰¹æ¬¡</label>
      <select id="selBatch">
        <option value="1">å•æ¬¡ç”Ÿæˆ</option>
        <option value="3">è¿ç»­ 3 æ¬¡</option>
        <option value="5">è¿ç»­ 5 æ¬¡</option>
      </select>
    </div>
    <div class="btn-row">
      <button class="btn btn-pri" onclick="generate()">âš¡ ç”Ÿæˆæ ‡é¢˜</button>
      <button class="btn btn-out" onclick="doReset()">ğŸ”„ é‡ç½®</button>
      <button class="btn btn-green" id="btnExportAll" onclick="exportAll()" style="display:none">ğŸ“¥ å¯¼å‡ºå…¨éƒ¨</button>
    </div>
  </div>

  <!-- ===== Output Card ===== -->
  <div class="ocard">
    <div class="card-hd">
      <div class="card-hd-l">
        <span class="gen-badge" id="genBadge" style="display:none">ç¬¬ 1 ç»„</span>
        <span class="kw-used-badge" id="kwUsedBadge" style="display:none">ğŸ”‘ å…³é”®è¯å·²æ¤å…¥</span>
        <span class="card-title">SEO æ ‡é¢˜è¾“å‡ºåŒº</span>
      </div>
      <div class="card-hd-r">
        <button class="btn btn-purple" id="btnGenPrompt" onclick="generatePrompt()" style="display:none;padding:6px 13px;font-size:12px">ğŸ“ ç”Ÿæˆå†™ä½œPrompt</button>
        <button class="btn btn-out" id="btnCopySet" onclick="copySet()" style="display:none;padding:6px 13px">ğŸ“‹ å¤åˆ¶æœ¬ç»„</button>
      </div>
    </div>
    <div class="card-body" id="outputBody">
      <div class="empty">
        <div class="empty-ico">âœ¨</div>
        <h3>ç‚¹å‡»ã€Œç”Ÿæˆæ ‡é¢˜ã€å¼€å§‹</h3>
        <p>å¯å…ˆå¯¼å…¥é«˜æµé‡å…³é”®è¯ï¼Œå…³é”®è¯å°†è‡ªåŠ¨æ¤å…¥æ ‡é¢˜å¹¶å†™å…¥SEOå†™ä½œPrompt</p>
      </div>
    </div>
    <div class="card-ft" id="cardFt" style="display:none">
      <button class="btn btn-pri" onclick="generate()" style="font-size:13px;padding:9px 18px">âš¡ ç»§ç»­ç”Ÿæˆï¼ˆä¸é‡å¤ï¼‰</button>
      <button class="btn btn-out" onclick="copySet()">ğŸ“‹ å¤åˆ¶æœ¬ç»„</button>
      <button class="btn btn-out" onclick="exportCurrent()">ğŸ“¤ å¯¼å‡ºæœ¬ç»„</button>
      <button class="btn btn-purple" onclick="generatePrompt()">ğŸ“ ç”Ÿæˆå†™ä½œPrompt</button>
    </div>
  </div>

  <!-- ===== History ===== -->
  <div class="hist-outer" id="histSection" style="display:none">
    <div class="hist-toggle" onclick="toggleHist()">
      <h3>ğŸ“š å†å²è®°å½• &nbsp;<span id="histCount" style="color:var(--pri);font-weight:700">0</span> ç»„</h3>
      <span id="histArrow" style="font-size:12px;color:var(--muted)">â–¼ å±•å¼€</span>
    </div>
    <div class="hist-content" id="histContent">
      <div class="hist-grid" id="histGrid"></div>
    </div>
  </div>

</div>

<!-- ===== Prompt Modal ===== -->
<div class="modal-overlay" id="promptModal" onclick="closePromptModalBg(event)">
  <div class="modal-box">
    <div class="modal-hd">
      <div class="modal-hd-l">
        <h3>ğŸ“ SEO å†™ä½œ Prompt ç”Ÿæˆå™¨</h3>
        <p>å°†ä¸‹æ–¹ Prompt å¤åˆ¶åˆ° ChatGPT / Claude / Geminiï¼Œå³å¯ç”Ÿæˆå®Œæ•´ SEO è½¯æ–‡</p>
      </div>
      <div class="modal-hd-r">
        <button class="btn btn-purple" onclick="copyPrompt()" style="padding:7px 14px;font-size:12px">ğŸ“‹ ä¸€é”®å¤åˆ¶</button>
        <button class="modal-close-btn" onclick="closePromptModal()">âœ•</button>
      </div>
    </div>
    <div class="modal-info-bar" id="promptInfoBar"><span class="p-stat">ğŸ“Š åŠ è½½ä¸­...</span></div>
    <div class="modal-tips">
      <span>ğŸ’¡</span>
      <span>å»ºè®®å®Œæ•´å¤åˆ¶ Prompt â†’ ç²˜è´´åˆ° AI å¯¹è¯æ¡†ç›´æ¥å‘é€ â†’ AI å°†æŒ‰ç»“æ„ç”Ÿæˆ 2500-3500 å­— SEO è½¯æ–‡ï¼Œå…³é”®è¯è‡ªç„¶æ¤å…¥ï¼Œé™„ Meta ä¿¡æ¯ä¸å†…é“¾å»ºè®®</span>
    </div>
    <div class="modal-body">
      <textarea class="prompt-ta" id="promptText" readonly onclick="this.select()"></textarea>
    </div>
    <div class="modal-ft">
      <button class="btn btn-purple" onclick="copyPrompt()">ğŸ“‹ å¤åˆ¶å®Œæ•´ Prompt</button>
      <button class="btn btn-out" onclick="exportPrompt()">ğŸ“¤ å¯¼å‡ºä¸º TXT</button>
      <button class="btn btn-out" onclick="closePromptModal()">âœ• å…³é—­</button>
      <span class="modal-ft-hint">ç‚¹å‡»æ–‡æœ¬æ¡†å Ctrl+A å¯å…¨é€‰</span>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
// ============================================================
// æ•°æ®åº“
// ============================================================
var DB = {
  usa:{kw:'ç¾å›½eSIM',name:'ç¾å›½',
    cities:['çº½çº¦','æ´›æ‰çŸ¶','æ‹‰æ–¯ç»´åŠ æ–¯','æ—§é‡‘å±±','èŠåŠ å“¥','è¿ˆé˜¿å¯†','æ³¢å£«é¡¿','è¥¿é›…å›¾','å¥¥å…°å¤š','åç››é¡¿DC'],
    carriers:['T-Mobile','AT&T','Verizon','Mint Mobile','Visible','Google Fi','US Mobile','Boost Mobile'],
    providers:['Airalo','Holafly','Nomad','Saily','Maya Mobile','GigSky','Ubigi','OneSimCard'],
    parks:['é»„çŸ³å…¬å›­','å¤§å³¡è°·','ä¼˜èƒœç¾åœ°','å¤§çƒŸå±±','ç§‘ç½—æ‹‰å¤šé«˜åŸ'],
    userTypes:['æ—…è¡Œè€…','å•†åŠ¡äººå£«','ç•™å­¦ç”Ÿ','è‡ªç”±è¡Œæ—…å®¢','èƒŒåŒ…å®¢','åäººæ¸¸å®¢','æ•°å­—æ¸¸æ°‘','èœœæœˆæ—…è¡Œè€…'],
    scenes:['çŸ­é€”æ—…æ¸¸','å•†åŠ¡å‡ºå·®','é•¿æœŸç•™å­¦','è‡ªé©¾æ¸¸','èƒŒåŒ…æ—…è¡Œ','å®¶åº­å‡ºæ¸¸','èœœæœˆæ—…è¡Œ','è·¨å·æ—…è¡Œ'],
    durations:['3å¤©','5å¤©','7å¤©','10å¤©','14å¤©','30å¤©','90å¤©','åŠå¹´'],
    issues:['ä¿¡å·ä¸ç¨³å®š','æ¿€æ´»å¤±è´¥','è¶…é¢æ”¶è´¹','ç½‘é€Ÿè¿‡æ…¢','å¥—é¤åˆ°æœŸ','è®¾å¤‡ä¸å…¼å®¹']},
  uk:{kw:'è‹±å›½eSIM',name:'è‹±å›½',
    cities:['ä¼¦æ•¦','æ›¼å½»æ–¯ç‰¹','çˆ±ä¸å ¡','åˆ©ç‰©æµ¦','ç‰›æ´¥','å‰‘æ¡¥','ä¼¯æ˜ç¿°','æ ¼æ‹‰æ–¯å“¥'],
    carriers:['EE','O2','Vodafone','Three UK','Sky Mobile','BT Mobile'],
    providers:['Airalo','Holafly','Nomad','Saily','Three UK','GigSky','Ubigi'],
    parks:['æ¹–åŒº','çº¦å…‹éƒ¡','å³°åŒº','æ–¯è¯ºç™»å°¼äºš','è‹æ ¼å…°é«˜åœ°'],
    userTypes:['æ—…è¡Œè€…','å•†åŠ¡äººå£«','ç•™å­¦ç”Ÿ','è‡ªç”±è¡Œæ—…å®¢','èƒŒåŒ…å®¢','åäººæ¸¸å®¢'],
    scenes:['çŸ­é€”æ—…æ¸¸','å•†åŠ¡å‡ºå·®','ç•™å­¦','è‡ªé©¾æ¸¸','èƒŒåŒ…æ—…è¡Œ','å®¶åº­å‡ºæ¸¸'],
    durations:['3å¤©','5å¤©','7å¤©','10å¤©','14å¤©','30å¤©'],
    issues:['ä¿¡å·ä¸ç¨³å®š','æ¿€æ´»å¤±è´¥','è¶…é¢æ”¶è´¹','ç½‘é€Ÿè¿‡æ…¢']},
  japan:{kw:'æ—¥æœ¬eSIM',name:'æ—¥æœ¬',
    cities:['ä¸œäº¬','å¤§é˜ª','äº¬éƒ½','åŒ—æµ·é“','å†²ç»³','åå¤å±‹','æ¨ªæ»¨','ç¦å†ˆ'],
    carriers:['NTT Docomo','SoftBank','au (KDDI)','Rakuten Mobile','IIJmio'],
    providers:['Airalo','Holafly','IIJmio','GTN Mobile','Nomad','Saily'],
    parks:['å¯Œå£«å±±','æ—¥å…‰å›½ç«‹å…¬å›­','çŸ¥åºŠåŠå²›','å±‹ä¹…å²›','è¥¿è¡¨å²›'],
    userTypes:['æ—…è¡Œè€…','åŠ¨æ¼«çˆ±å¥½è€…','ç¾é£Ÿæ—…è¡Œè€…','æ‘„å½±çˆ±å¥½è€…','å•†åŠ¡äººå£«','ç•™å­¦ç”Ÿ'],
    scenes:['è§‚å…‰æ—…æ¸¸','ç¾é£Ÿä¹‹æ—…','åŠ¨æ¼«åœ£åœ°å·¡ç¤¼','å•†åŠ¡å‡ºå·®','è‡ªç”±è¡Œ','èœœæœˆæ—…è¡Œ'],
    durations:['5å¤©','7å¤©','10å¤©','14å¤©','30å¤©'],
    issues:['æ¿€æ´»å¤±è´¥','é™é€Ÿé—®é¢˜','æµé‡ä¸è¶³','è®¾å¤‡ä¸å…¼å®¹']},
  europe:{kw:'æ¬§æ´²eSIM',name:'æ¬§æ´²',
    cities:['å·´é»','ç½—é©¬','å·´å¡ç½—é‚£','é˜¿å§†æ–¯ç‰¹ä¸¹','æŸæ—','ç»´ä¹Ÿçº³','å¸ƒæ‹‰æ ¼','è‹é»ä¸–'],
    carriers:['Vodafone','Orange','Deutsche Telekom','Three','O2','Tele2'],
    providers:['Airalo','Holafly','Nomad','Saily','Global Yo','OneSimCard','Ubigi'],
    parks:['é˜¿å°”å‘æ–¯å±±åŒº','å¤šç‘™æ²³æµåŸŸ','åœ°ä¸­æµ·æ²¿å²¸','åŒ—æ¬§å³¡æ¹¾','æ³¢è¥¿ç±³äºš'],
    userTypes:['æ—…è¡Œè€…','èƒŒåŒ…å®¢','å•†åŠ¡äººå£«','èœœæœˆæ—…è¡Œè€…','æ‘„å½±çˆ±å¥½è€…','ç•™å­¦ç”Ÿ'],
    scenes:['å¤šå›½æ—…è¡Œ','è·¨å¢ƒå•†åŠ¡','è‡ªé©¾æ¸¸','é“è·¯æ—…è¡Œ','é‚®è½®æ—…è¡Œ','ç•™å­¦'],
    durations:['7å¤©','14å¤©','21å¤©','30å¤©','60å¤©'],
    issues:['å¤šå›½åˆ‡æ¢é—®é¢˜','ä¿¡å·ä¸ç¨³å®š','æ¿€æ´»å¤±è´¥','è¦†ç›–ä¸å…¨']},
  thailand:{kw:'æ³°å›½eSIM',name:'æ³°å›½',
    cities:['æ›¼è°·','æ™®å‰å²›','æ¸…è¿ˆ','èŠ­æé›…','è‹æ¢…å²›','åæ¬£','å–€æ¯”','è±¡å²›'],
    carriers:['AIS','DTAC','TrueMove H','NT Mobile'],
    providers:['Airalo','Holafly','AIS SIM2Fly','Nomad','Saily','GigSky'],
    parks:['è€ƒè‰¾å›½å®¶å…¬å›­','è±¡å²›æµ·æ»©','å®‰è¾¾æ›¼æµ·','è‹æ¢…å²›','æ–¯ç±³å…°ç¾¤å²›'],
    userTypes:['æ—…è¡Œè€…','åº¦å‡æ—…å®¢','èƒŒåŒ…å®¢','æ½œæ°´çˆ±å¥½è€…','å•†åŠ¡äººå£«','èœœæœˆæ—…è¡Œè€…'],
    scenes:['æµ·å²›åº¦å‡','åŸå¸‚è§‚å…‰','ç¾é£Ÿä¹‹æ—…','æ°´ä¸Šè¿åŠ¨','å¯ºåº™æ–‡åŒ–æ¸¸','å•†åŠ¡å‡ºå·®'],
    durations:['3å¤©','5å¤©','7å¤©','10å¤©','14å¤©','30å¤©'],
    issues:['ä¿¡å·ä¸ç¨³å®š','æ¿€æ´»å¤±è´¥','æµé‡é™é€Ÿ','æµ·å²›è¦†ç›–å·®']},
  korea:{kw:'éŸ©å›½eSIM',name:'éŸ©å›½',
    cities:['é¦–å°”','é‡œå±±','æµå·å²›','ä»å·','å¤§é‚±','å…‰å·','æ°´åŸ','åº†å·'],
    carriers:['SK Telecom','KT','LG U+','SK7Mobile','KT MVNO'],
    providers:['Airalo','Holafly','SKT eSIM','KT eSIM','Nomad','Saily'],
    parks:['æ±‰æ‹¿å±±','é›ªå²³å±±','æ™ºå¼‚å±±','åŒ—æ±‰å±±','æµå·å²›'],
    userTypes:['è¿½æ˜Ÿæ—','æ—…è¡Œè€…','ç¾é£Ÿçˆ±å¥½è€…','ç•™å­¦ç”Ÿ','å•†åŠ¡äººå£«','K-Dramaç²‰ä¸'],
    scenes:['è¿½æ˜Ÿæ—…è¡Œ','ç¾é£Ÿä¹‹æ—…','è´­ç‰©æ—…æ¸¸','æ–‡åŒ–ä½“éªŒ','è‡ªç„¶è§‚å…‰','ç•™å­¦'],
    durations:['3å¤©','5å¤©','7å¤©','10å¤©','14å¤©'],
    issues:['é™é€Ÿé—®é¢˜','æ¿€æ´»å¤±è´¥','æµé‡ä¸è¶³','æ‰‹æœºé”ç½‘']}
};

var DEVICES = ['iPhone','å®‰å“æ‰‹æœº','ä¸‰æ˜ŸGalaxy','iPhone 16 Pro','è°·æ­ŒPixel','è‹¹æœæ‰‹æœº','å°ç±³æ‰‹æœº','ä¸€åŠ æ‰‹æœº'];
var COUNTS  = ['3','5','6','7','8','10'];
var TOPICS  = ['ä»·æ ¼ä¸è¦†ç›–å…¨æ','è´­ä¹°æ¿€æ´»æ”»ç•¥','å¥—é¤æ·±åº¦æ¨è','å®åœ°æµ‹è¯„æŠ¥å‘Š','çœé’±å®Œå…¨æŒ‡å—','çœŸå®ä½¿ç”¨è¯„æµ‹','æƒå¨è´­ä¹°æŒ‡å—','å…¨é¢æ·±åº¦è§£æ'];

// ============================================================
// H1 æ¨¡æ¿åº“ï¼ˆ40æ¡ï¼‰
// ============================================================
var H1T = [
  '{year}å¹´{kw}ç»ˆææŒ‡å—ï¼š{topic}',
  '{kw}å®Œæ•´æ”»ç•¥ï¼š{userType}å¿…è¯»æ‰‹å†Œ',
  '{kw}é€‰è´­åœ£ç»ï¼šè´­ä¹°ã€æ¿€æ´»åˆ°ä½¿ç”¨å…¨æµç¨‹è¯¦è§£',
  '{year}æœ€æ–°{kw}æ·±åº¦è¯„æµ‹ï¼šå“ªå®¶æœ€å€¼å¾—ä¹°',
  '{kw}å®Œå…¨è§£æï¼š{scene}ä¸“å±æ¨èæŒ‡å—',
  'ä»é›¶å¼€å§‹ç”¨{kw}ï¼š{userType}ä¸“å±å®Œå…¨æ•™ç¨‹',
  '{kw}ç»ˆæå¯¹æ¯”ï¼š{c1} vs {c2}è°æ›´èƒœä¸€ç­¹',
  '{year}å‡ºè¡Œå¿…å¤‡{kw}ï¼šä»·æ ¼ã€è¦†ç›–ã€æ¿€æ´»å…¨è§£æ',
  '{kw}çœé’±æŒ‡å—ï¼š{userType}å¦‚ä½•é€‰å¯¹å¥—é¤',
  '{kw}æ·±åº¦æµ‹è¯„ï¼š{city}åŠå‘¨è¾¹åœ°åŒºå®æµ‹æŠ¥å‘Š',
  'å‘Šåˆ«æ¼«æ¸¸è´¹ï¼{kw}å®Œæ•´è´­ä¹°ä¸ä½¿ç”¨æŒ‡å—',
  '{kw}æƒå¨æ¨èï¼š{year}æ€§ä»·æ¯”æœ€é«˜å¥—é¤å¤§ç›˜ç‚¹',
  '{kw}æ–°æ‰‹å…¥é—¨ï¼šä»è´­ä¹°åˆ°æ¿€æ´»çš„ä¿å§†çº§æ•™ç¨‹',
  '{device}ä½¿ç”¨{kw}è®¾ç½®æŒ‡å—ï¼š{year}æœ€æ–°å®Œæ•´æ•™ç¨‹',
  '{kw}å…¨æ”»ç•¥ï¼šè®©{userType}åœ¨{dest}ç•…è¡Œæ— å¿§',
  'é€‰å¯¹{kw}ï¼Œ{scene}ä¸å†çƒ¦æ¼ï¼š{year}æƒå¨æ¨è',
  '{kw}æ·±åº¦æ¨ªè¯„ï¼š{p1} vs {p2}å…¨é¢å¯¹æ¯”',
  '{year}æ—…è¡Œå¿…å¤‡ï¼š{kw}é€‰è´­ã€æ¿€æ´»ã€ä½¿ç”¨å®Œå…¨æŒ‡å—',
  '{kw}ç»ˆæçœé’±æ‰‹å†Œï¼š{userType}å¿…çœ‹å¥—é¤åˆ†æ',
  '{kw}å®æµ‹æŠ¥å‘Šï¼šé€Ÿåº¦ã€è¦†ç›–ã€ä»·æ ¼å…¨æ–¹ä½è¯„åˆ†',
  'ä¸è¸©å‘ï¼{kw}è´­ä¹°é¿å‘æŒ‡å—ï¼š{year}æœ€æ–°ç‰ˆ',
  '{kw}å®Œå…¨æŒ‡å—ï¼š{dur}å‡ºè¡Œæœ€ä¼˜æ–¹æ¡ˆæ¨è',
  '{kw}ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆï¼š{scene}ä¸“å±é€‰è´­æ”»ç•¥',
  '{year}{kw}å¸‚åœºå…¨æ™¯ï¼šå“ªæ¬¾eSIMçœŸæ­£å€¼å¾—ä¹°',
  '{kw}å®ç”¨æ‰‹å†Œï¼š{userType}ä»é€‰è´­åˆ°ä½¿ç”¨å…¨ç¨‹æ— å¿§',
  'æ¢ç´¢{dest}å‰å¿…è¯»ï¼š{kw}é€‰è´­æ ¸å¿ƒè¦ç‚¹ä¸é¿å‘æŒ‡å—',
  '{year}{kw}å¤§è¯„æµ‹ï¼šä»·æ ¼ã€é€Ÿåº¦ã€è¦†ç›–ç»¼åˆæ’å',
  'ç”¨{kw}ç•…æ¸¸{dest}ï¼š{scene}æœ€ä½³ç½‘ç»œè§£å†³æ–¹æ¡ˆ',
  '{kw}ä¿å§†çº§æ”»ç•¥ï¼š{device}ç”¨æˆ·ä¸“å±å®Œæ•´æ•™ç¨‹',
  'å»{dest}ä¸ç”¨æ„ç½‘ç»œï¼š{kw}é€‰è´­ä½¿ç”¨å®Œå…¨è§£ç­”',
  '{kw}å®Œå…¨æŒ‡å—{year}ï¼š{userType}çš„æœ€ä¼˜æ–¹æ¡ˆæ¨è',
  '{year}å¹´åº¦æœ€ä½³{kw}ï¼šç»¼åˆè¯„æµ‹ä¸é€‰è´­å»ºè®®å¤§å…¨',
  '{kw}æ·±åº¦æ¯”è¾ƒï¼š{c1}è¿˜æ˜¯{c2}æ›´é€‚åˆä½ ',
  '{city}å®æµ‹{kw}ï¼šçœŸå®ç½‘é€Ÿä¸è¦†ç›–æƒ…å†µå…¨è®°å½•',
  '{userType}é¦–é€‰{kw}ï¼š{year}ä¸“ä¸šæ¨èä¸å®æˆ˜å¿ƒå¾—',
  '{hKw}å®Œæ•´æ”»ç•¥ï¼š{year}{kw}è´­ä¹°æ¿€æ´»ä¿å§†çº§æŒ‡å—',
  '{dest}æ—…è¡Œå¿…å¤‡ï½œ{hKw}æ·±åº¦è¯„æµ‹ï¼š{year}çœŸå®ä½¿ç”¨ä½“éªŒæŠ¥å‘Š',
  '{hKw} vs ä¸»æµ{dest}eSIMï¼š{year}æ€§ä»·æ¯”å…¨æ–¹ä½æ¨ªå‘å¯¹æ¯”',
  'ç”¨{hKw}æ¸¸{dest}ï¼š{year}è´­ä¹°æ¿€æ´»ä½¿ç”¨å…¨æµç¨‹æƒå¨è§£æ',
  '{hKw}é€‰è´­æŒ‡å—ï¼š{year}{dest}eSIMå¥—é¤ç»¼åˆæµ‹è¯„ä¸æ¨è'
];

// ============================================================
// H2 æ¨¡æ¿åº“ï¼ˆ9ç±» Ã— 13æ¡ï¼‰
// ============================================================
var CATS = {
  purchase:{name:'è´­ä¹°æŒ‡å—',cls:'c-pur',t:[
    '{kw}å¦‚ä½•è´­ä¹°ï¼Ÿ{year}åœ¨çº¿è´­ä¹°å®Œæ•´æ­¥éª¤è¯¦è§£',
    'è´­ä¹°{kw}å‰å¿…çŸ¥çš„{cnt}å¤§å…³é”®äº‹é¡¹',
    '{kw}å“ªé‡Œä¹°æœ€åˆ’ç®—ï¼Ÿå®˜ç½‘vsç¬¬ä¸‰æ–¹å¹³å°å…¨å¯¹æ¯”',
    '{p1}è´­ä¹°æ•™ç¨‹ï¼šä»æ³¨å†Œåˆ°ä¸‹å•å›¾æ–‡æ­¥éª¤å…¨è§£æ',
    '{kw}è´­ä¹°æŒ‡å—ï¼šé¿å¼€{issue}çš„å®ç”¨å»ºè®®',
    'å‡ºå‘å‰åœ¨å›½å†…æå‰è´­ä¹°{kw}ï¼Ÿè¯¦ç»†æ“ä½œæµç¨‹',
    '{kw}è´­ä¹°å¸¸è§è¯¯åŒºï¼šæ–°æ‰‹å¿…çœ‹é¿å‘æ¸…å•',
    '{kw}è´­ä¹°æ”»ç•¥ï¼š{dur}å¥—é¤å“ªæ¬¾æœ€å€¼',
    'æ”¯ä»˜å®æˆ–å¾®ä¿¡ä¹Ÿèƒ½ä¹°{kw}ï¼Ÿå¤šç§è´­ä¹°æ–¹å¼å…¨ç›˜ç‚¹',
    '{kw}è´­ä¹°åå¤šä¹…åˆ°è´¦ï¼Ÿä»ä¸‹å•åˆ°æ¿€æ´»å…¨æµç¨‹',
    'æµ·å¤–è´­ä¹°vså›½å†…æå‰è´­ä¹°{kw}ï¼šå“ªç§æ›´åˆ’ç®—',
    '{kw}å®ä½“åº—vsç½‘ä¸Šè´­ä¹°ï¼šä¼˜ç¼ºç‚¹ä¸é€‚ç”¨åœºæ™¯å¯¹æ¯”',
    '{hKw}è´­ä¹°æ•™ç¨‹ï¼š{year}{kw}å®Œæ•´ä¸‹å•æ“ä½œæ­¥éª¤'
  ]},
  activation:{name:'æ¿€æ´»æ•™ç¨‹',cls:'c-act',t:[
    '{kw}æ¿€æ´»å…¨æ”»ç•¥ï¼š{device}é€æ­¥æ“ä½œå®Œæ•´æ•™ç¨‹',
    '{kw}æ¿€æ´»å¤±è´¥æ€ä¹ˆåŠï¼Ÿå¸¸è§åŸå› ä¸è§£å†³æ–¹æ¡ˆ',
    'åˆ°{dest}ä¹‹å‰è¿˜æ˜¯ä¹‹åæ¿€æ´»{kw}ï¼Ÿæ—¶æœºé€‰æ‹©è¯¦è§£',
    'æ— éœ€Wi-Fiä¹Ÿèƒ½æ¿€æ´»ï¼Ÿ{kw}ç¦»çº¿æ¿€æ´»æ–¹æ³•è¯¦è§£',
    '{device}ä½¿ç”¨{kw}è®¾ç½®æ•™ç¨‹ï¼šä»ä¸‹è½½åˆ°æ¿€æ´»å…¨ç¨‹å›¾è§£',
    '{kw}äºŒç»´ç æ‰«ææ¿€æ´»è¯¦ç»†æ­¥éª¤ä¸æ³¨æ„äº‹é¡¹',
    '{kw}è‡ªåŠ¨æ¿€æ´»ä¸æ‰‹åŠ¨æ¿€æ´»çš„åŒºåˆ«ä¸é€‰æ‹©å»ºè®®',
    'æ¿€æ´»{kw}éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿå½±å“é€Ÿåº¦çš„å…³é”®å› ç´ ',
    'åŒå¡æ‰‹æœºå¦‚ä½•åŒæ—¶ä½¿ç”¨å›½å†…å¡å’Œ{kw}',
    '{kw}æ¿€æ´»åå¦‚ä½•åˆ‡æ¢ä¸»å‰¯å¡ï¼Ÿè®¾ç½®æ•™ç¨‹',
    '{device}æ¿€æ´»{kw}å›¾æ–‡æ•™ç¨‹ï¼šå…¨ç¨‹æˆªå›¾æŒ‡å¼•',
    'æ¿€æ´»{kw}æç¤ºé”™è¯¯ï¼Ÿ{cnt}ç§å¸¸è§é”™è¯¯ä»£ç è§£æ',
    'æ¿€æ´»{hKw}å…¨æ”»ç•¥ï¼š{device}é€æ­¥æ“ä½œå›¾æ–‡è¯¦è§£'
  ]},
  price:{name:'ä»·æ ¼å¯¹æ¯”',cls:'c-pri',t:[
    '{year}{kw}ä»·æ ¼å…¨å¯¹æ¯”ï¼š{c1} vs {c2}',
    '{kw}{dur}å¥—é¤è´¹ç”¨åˆ†æï¼šå“ªå®¶æœ€åˆ’ç®—',
    '{kw}æŒ‰å¤©è¿˜æ˜¯æŒ‰æµé‡è®¡è´¹æ›´çœé’±ï¼Ÿæ·±åº¦åˆ†æ',
    '{kw}éšè—è´¹ç”¨æ­ç§˜ï¼šå®é™…ä½¿ç”¨æˆæœ¬å…¨è§£æ',
    'çœé’±å¿…çœ‹ï¼{kw}æŠ˜æ‰£ç ä¸ä¼˜æƒ æ´»åŠ¨å¤§æ±‡æ€»',
    '{kw}ä»·æ ¼æ¨ªè¯„ï¼š{dur}å‡ºè¡Œæ€§ä»·æ¯”å®Œæ•´æ’è¡Œ',
    'å­¦ç”Ÿå…šå¦‚ä½•ä¹°åˆ°æœ€ä¾¿å®œçš„{kw}ï¼Ÿçœé’±æŠ˜æ‰£æ”»ç•¥',
    '{kw}å®¶åº­å¥—é¤å€¼å¾—ä¹°å—ï¼Ÿå¤šäººå…±äº«è´¹ç”¨åˆ†æ',
    '{kw} vs å›½é™…æ¼«æ¸¸ï¼šå“ªä¸ªæ›´çœé’±ï¼Ÿè´¹ç”¨å…¨å¯¹æ¯”',
    'å…è´¹è¯•ç”¨{kw}ï¼Ÿä¼˜æƒ æ´»åŠ¨ä¸é€€æ¬¾æ”¿ç­–å…¨è§£æ',
    '{year}{kw}æœ€æ–°å®šä»·ï¼šå„å¤§å¹³å°ä»·æ ¼æ¨ªå‘å¯¹æ¯”',
    '{kw}æµé‡åŒ…åŠ è´­æŒ‡å—ï¼šè¶…å‡ºå¥—é¤åå¦‚ä½•æœ€çœé’±',
    '{hKw}çœŸå®ä»·æ ¼æµ‹è¯„ï¼š{year}{kw}å¥—é¤æ€§ä»·æ¯”æ·±æ'
  ]},
  coverage:{name:'ç½‘é€Ÿè¦†ç›–',cls:'c-cov',t:[
    '{kw}ç½‘é€Ÿå®æµ‹ï¼š{city} 5Gå’Œ4G LTEè¦†ç›–æµ‹è¯•æŠ¥å‘Š',
    '{dest}å„åœ°åŒº{kw}ä¿¡å·è¦†ç›–åœ°å›¾ä¸å®æµ‹åˆ†æ',
    'è‡ªé©¾æ¸¸å¿…çœ‹ï¼š{dest}å…¬è·¯æ²¿çº¿{kw}è¦†ç›–å®æµ‹æ•°æ®',
    '{kw}åœ¨{park}ä¿¡å·å®æµ‹ï¼šåè¿œåœ°åŒºè¦†ç›–æƒ…å†µ',
    '{c1}ä¸{c2} {kw}çœŸå®ç½‘é€Ÿæ¨ªå‘å¯¹æ¯”æµ‹è¯•',
    '{dest}ä¸åŒåœ°åŒº{kw}è¦†ç›–å·®å¼‚å®æµ‹å®Œæ•´å¯¹æ¯”',
    '{kw}åœ¨åè¿œåœ°åŒºçš„è¡¨ç°å¦‚ä½•ï¼Ÿè¦†ç›–ç›²åŒºå…¨é¢åˆ†æ',
    '{kw}ä¸‹è½½ä¸Šä¼ é€Ÿåº¦å®æµ‹ï¼š{c1} vs {c2}',
    'åŸå¸‚vséƒŠåŒºï¼š{kw}å®é™…ä½¿ç”¨ç½‘é€Ÿå·®å¼‚å¯¹æ¯”åˆ†æ',
    '{kw} 5G vs 4G LTEï¼šæ™®é€šç”¨æˆ·è¯¥å¦‚ä½•é€‰æ‹©',
    '{city}åœ°é“å’Œå®¤å†…{kw}ä¿¡å·è¡¨ç°å®æµ‹æŠ¥å‘Š',
    '{kw}æµåª’ä½“ä½¿ç”¨ä½“éªŒï¼š4Kè§†é¢‘ä¸æ¸¸æˆå»¶è¿Ÿæµ‹è¯•',
    '{hKw}ä¿¡å·å®æµ‹ï¼š{city}å…¨åŒºè¦†ç›–è¯¦ç»†æ•°æ®æŠ¥å‘Š'
  ]},
  faq:{name:'å¸¸è§é—®é¢˜',cls:'c-faq',t:[
    '{kw}å¸¸è§é—®é¢˜è§£ç­”ï¼šæ–°æ‰‹æœ€æƒ³çŸ¥é“çš„{cnt}ä¸ªç–‘é—®',
    '{kw}ä¿¡å·ä¸ç¨³å®šï¼Ÿè¿™å‡ ä¸ªæ–¹æ³•å¸®ä½ å¿«é€Ÿè§£å†³',
    'ä»€ä¹ˆæ‰‹æœºæ”¯æŒ{kw}ï¼Ÿ{year}å…¼å®¹è®¾å¤‡å®Œæ•´æ¸…å•',
    '{kw}æµé‡ç”¨å®Œäº†æ€ä¹ˆåŠï¼Ÿç»­è´¹ä¸è¿½åŠ æµé‡æ–¹æ³•',
    '{kw}èƒ½æ‰“ç”µè¯å‘çŸ­ä¿¡å—ï¼ŸåŠŸèƒ½è¯¦è§£ä¸æ³¨æ„äº‹é¡¹',
    'eSIMå’Œå®ä½“SIMæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ{year}æ·±åº¦æŠ€æœ¯è§£æ',
    '{kw}å®‰å…¨å—ï¼Ÿæ•°æ®éšç§ä¸ä½¿ç”¨å®‰å…¨å…¨è§£æ',
    'ç¦»å¼€{dest}å{kw}è¿˜èƒ½ç”¨å—ï¼Ÿè·¨å¢ƒæ¼«æ¸¸å®Œæ•´è¯´æ˜',
    '{kw}æ•°æ®ç”¨é‡è¿½è¸ªï¼šå¦‚ä½•é¿å…è¶…é¢æ”¶è´¹',
    '{kw}èƒ½å¦å…±äº«çƒ­ç‚¹ç»™å…¶ä»–è®¾å¤‡ï¼Ÿçƒ­ç‚¹ä½¿ç”¨å®Œå…¨æŒ‡å—',
    '{kw}æœ‰æ•ˆæœŸè¿‡äº†è¿˜èƒ½ç»­è´¹å—ï¼Ÿå¥—é¤ç®¡ç†å®Œå…¨æŒ‡å—',
    'æ‰‹æœºä¸¢å¤±å{kw}æ€ä¹ˆå¤„ç†ï¼Ÿæ•°æ®å®‰å…¨ä¿éšœæŒ‡å—',
    'å…³äº{hKw}çš„{cnt}ä¸ªé«˜é¢‘ç–‘é—®ï¼š{year}æƒå¨è§£ç­”'
  ]},
  comparison:{name:'äº§å“å¯¹æ¯”',cls:'c-cmp',t:[
    '{p1} vs {p2}ï¼š{kw}æ·±åº¦æ¨ªå‘è¯„æµ‹',
    '{c1} vs {c2}ï¼š{dest} eSIMå…¨é¢å¯¹æ¯”åˆ†æ',
    '{kw} vs å®ä½“SIMï¼š{year}å®é™…ä½¿ç”¨ä½“éªŒå…¨é¢å¯¹æ¯”',
    '{kw} vs ç§Ÿç”¨éšèº«WiFiï¼šå“ªä¸ªæ›´é€‚åˆ{userType}',
    '{dur}çŸ­é€” vs é•¿æœŸä½¿ç”¨ï¼š{kw}å¥—é¤å¦‚ä½•é€‰',
    'é¡¶çº§{kw}æä¾›å•†å¤§å¯¹æ¯”ï¼šè¦†ç›–ã€ä»·æ ¼ã€æœåŠ¡ç»¼åˆè¯„åˆ†',
    '{dest}æœ¬åœŸè¿è¥å•†eSIM vs å›½é™…eSIMå¹³å°æ·±åº¦å¯¹æ¯”',
    '{c1}å®ä½“å¥—é¤ vs {kw}ï¼šåŠŸèƒ½ä¸ä»·æ ¼è¯¦ç»†å¯¹æ¯”',
    'æ–°æ‰‹vsèµ„æ·±ç”¨æˆ·ï¼šä¸åŒéœ€æ±‚ä¸‹çš„{kw}é€‰æ‹©å·®å¼‚',
    '{kw}ä¸‰å¤§ä¸»æµæ–¹æ¡ˆæ¨ªè¯„ï¼šæœ€é€‚åˆ{userType}çš„é€‰æ‹©',
    '{year}{kw}äº”å¤§å¹³å°æ¨ªè¯„ï¼šè°æ˜¯çœŸæ­£çš„æ€§ä»·æ¯”ä¹‹ç‹',
    'é¢„ä»˜è´¹vsåä»˜è´¹ï¼š{kw}å¥—é¤ç±»å‹ä¸é€‚ç”¨åœºæ™¯æŒ‡å—',
    '{hKw} vs {p1}ï¼š{kw}ä¸¤å¤§å¹³å°æ·±åº¦æ¨ªå‘å…¨æ¯”è¾ƒ'
  ]},
  provider:{name:'æä¾›å•†è¯„æµ‹',cls:'c-pvd',t:[
    '{p1} {kw}æ·±åº¦è¯„æµ‹ï¼š{year}ç»¼åˆä½¿ç”¨ä½“éªŒæŠ¥å‘Š',
    '{year}æœ€å€¼å¾—æ¨èçš„{kw}æä¾›å•†TOP5æƒå¨æ’å',
    '{p1} {kw}å¥—é¤è¯¦è§£ï¼šè¦†ç›–ã€é€Ÿåº¦ã€ä»·æ ¼å…¨æ',
    '{kw}å“ªå®¶æœ€é è°±ï¼Ÿç”¨æˆ·å£ç¢‘ä¸ä¸“ä¸šè¯„æµ‹ç»¼åˆæ¦œ',
    '{p1} {kw}å®¢æœä½“éªŒï¼šå”®å‰å”®åå…¨ç¨‹æµ‹è¯„æŠ¥å‘Š',
    'è¿è¥å•†ç›´è¥eSIM vs ç¬¬ä¸‰æ–¹å¹³å°ï¼š{dest}å¸‚åœºåˆ†æ',
    '{p1} {kw}é€€æ¬¾æ”¿ç­–è¯¦è§£ï¼šæ¶ˆè´¹ä¿éšœæœºåˆ¶å…¨è§£è¯»',
    'ä¸“ä¸º{userType}è®¾è®¡ï¼š{kw}æä¾›å•†æœåŠ¡å…¨é¢å¯¹æ¯”',
    '{c1}å®˜æ–¹{kw}æ€ä¹ˆä¹°ï¼Ÿæ³¨å†Œä¸è´­ä¹°å®Œæ•´æµç¨‹',
    '{year}{dest} eSIMå¸‚åœºåŠ¨æ€ï¼šä¸»è¦æä¾›å•†æœ€æ–°å˜åŒ–',
    '{p1}æ–°ç”¨æˆ·ç¦åˆ©ï¼š{kw}é¦–æ¬¡è´­ä¹°ä¼˜æƒ æ´»åŠ¨å…¨è§£æ',
    'å°ä¼—ä½†å¥½ç”¨çš„{kw}æä¾›å•†ï¼šè¢«å¿½è§†çš„ä¼˜è´¨é€‰æ‹©',
    '{hKw}æœåŠ¡å•†è¯„æµ‹ï¼š{year}{dest}ä½¿ç”¨å£ç¢‘ä¸ç»¼åˆæ’å'
  ]},
  scenario:{name:'ä½¿ç”¨åœºæ™¯',cls:'c-scn',t:[
    '{dur}{dest}{scene}ï¼š{kw}å¥—é¤æœ€ä¼˜é€‰æ‹©æ–¹æ¡ˆ',
    '{dest}è‡ªé©¾æ¸¸{kw}æ”»ç•¥ï¼šå…¨ç¨‹ä¸æ–­ç½‘å¥—é¤æ¨è',
    'ç•™å­¦ç”Ÿå¿…çœ‹ï¼š{dest}é•¿æœŸ{kw}è§£å†³æ–¹æ¡ˆä¸è´¹ç”¨è§„åˆ’',
    'å•†åŠ¡å‡ºå·®{dest}ï¼š{kw}å›½é™…é€šè¯ä¸é«˜é€Ÿæ•°æ®å¥—é¤æ¨è',
    '{dest}èœœæœˆæ—…è¡Œ{kw}æŒ‡å—ï¼šæµªæ¼«ä¹‹æ—…ç½‘ç»œæ— å¿§',
    'å¸¦å­©å­å»{dest}æ—…æ¸¸ï¼šå®¶åº­{kw}å¥—é¤æœ€ä¼˜æ–¹æ¡ˆ',
    '{dest}è‡ªç”±è¡Œ{kw}ï¼šè·¨åŒºæ—…è¡Œå…¨ç¨‹ç½‘ç»œä¿éšœ',
    'æ‰“å·¥åº¦å‡{dest}ï¼šé•¿æœŸ{kw}å¥—é¤é€‰è´­å®Œå…¨æ”»ç•¥',
    '{dest}æ—…è¡Œ{kw}æ€¥æ•‘åŒ…ï¼šä¸´æ—¶è´­ä¹°ä¸ç´§æ€¥æ¿€æ´»æŒ‡å—',
    'ç¬¬ä¸€æ¬¡å»{dest}ï¼š{kw}è¿˜æ˜¯å®ä½“å¡ï¼Ÿæ–°æ‰‹å…¨é¢æŒ‡å¯¼',
    '{dest}{scene}ä¸“å±{kw}æ¨èï¼šå®ç”¨è·¯çº¿å¥—é¤æ­é…',
    'æ•°å­—æ¸¸æ°‘åœ¨{dest}ï¼šé•¿æœŸç¨³å®š{kw}è§£å†³æ–¹æ¡ˆ',
    '{dur}{dest}{scene}é¦–é€‰{hKw}ï¼šçœŸå®ä½¿ç”¨åœºæ™¯å®Œå…¨æŒ‡å—'
  ]},
  tips:{name:'ä½¿ç”¨æŠ€å·§',cls:'c-tip',t:[
    '{kw}çœé’±å¤§æ³•ï¼š{cnt}ä¸ªå®ç”¨æŠ€å·§å‡å°‘é€šè®¯è´¹',
    'æ—…è¡Œè¾¾äººåˆ†äº«ï¼šä¹°{kw}çš„{cnt}ä¸ªçœé’±ç§˜è¯€',
    '{kw}æµé‡ç®¡ç†æŠ€å·§ï¼šç”¨å¾—æ›´å°‘ä½†ç½‘é€Ÿä¸é™çº§',
    'å‡ºå‘å‰è®¾ç½®{kw}ï¼š{cnt}ä¸ªå¿…åšå‡†å¤‡å·¥ä½œ',
    '{kw}ä½¿ç”¨æŠ€å·§ï¼šè®©å¥—é¤ä»·å€¼æœ€å¤§åŒ–çš„å®ç”¨æ–¹æ³•',
    '{kw}ç»­è´¹æ”»ç•¥ï¼šå¦‚ä½•æ— ç¼ç»­æœŸä¸æ–­çº¿',
    '{kw}åŠ å…è´¹Wi-Fiï¼šæœ€çœé’±çš„{dest}ç½‘ç»œæ–¹æ¡ˆ',
    '{kw}è¿”ç¨‹åå¦‚ä½•å¤„ç†ï¼Ÿå¥—é¤ä½™é‡ä¸æ³¨é”€æŒ‡å—',
    '{kw}å¤šè®¾å¤‡å…±äº«ï¼šä¸€å¼ eSIMè¿æ¥å¤šä¸ªè®¾å¤‡æ–¹æ¡ˆ',
    '{kw}èŠ‚å‡æ—¥è´­ä¹°æ”»ç•¥ï¼šç‰¹ä»·æ—¶æœºä¸ä¼˜æƒ æ¸ é“æ±‡æ€»',
    '{kw}é«˜æ•ˆä½¿ç”¨æŒ‡å—ï¼š{cnt}ä¸ªä½ å¯èƒ½ä¸çŸ¥é“çš„åŠŸèƒ½',
    'å»¶é•¿{kw}æœ‰æ•ˆæœŸçš„æŠ€å·§ï¼šå¥—é¤åˆ°æœŸå‰å¿…çœ‹æ”»ç•¥',
    'ç”¨{hKw}çœæ›´å¤šé’±ï¼š{dest}eSIMæµé‡æœ€å¤§åŒ–å®æˆ˜æ”»ç•¥'
  ]}
};

var CKEYS = Object.keys(CATS);

var ROTS = [
  ['purchase','activation','price','coverage','faq','comparison','provider','scenario','tips','purchase'],
  ['purchase','activation','price','faq','comparison','provider','scenario','tips','coverage','activation'],
  ['purchase','price','coverage','faq','comparison','provider','scenario','tips','activation','comparison'],
  ['purchase','activation','price','coverage','faq','provider','scenario','tips','comparison','tips'],
  ['activation','price','coverage','faq','comparison','provider','scenario','tips','purchase','scenario'],
  ['purchase','activation','price','coverage','comparison','provider','scenario','tips','faq','provider'],
  ['purchase','activation','coverage','faq','comparison','provider','scenario','tips','price','faq'],
  ['purchase','activation','price','coverage','faq','comparison','scenario','tips','provider','purchase'],
  ['activation','price','coverage','faq','comparison','provider','tips','purchase','scenario','coverage'],
  ['purchase','price','activation','faq','comparison','scenario','tips','provider','coverage','activation']
];

// ============================================================
// å…¨å±€çŠ¶æ€
// ============================================================
var genCount = 0;
var curSet   = null;
var hist     = [];
var userKws  = [];
var curUsedKwIndices = [];
var kwPanelOpen = false;

// ============================================================
// å·¥å…·å‡½æ•°
// ============================================================
function pickItem(arr, n) {
  if (!arr || arr.length === 0) { return ''; }
  var idx = ((n % arr.length) + arr.length) % arr.length;
  return arr[idx];
}
function pickHotKw(seed) {
  if (!userKws || userKws.length === 0) { return ''; }
  return userKws[Math.abs(seed) % userKws.length];
}
function buildCtx(destKey, year, seed) {
  var d  = DB[destKey];
  var s  = Math.abs(seed) | 0;
  var hl = d.carriers.length;
  var pl = d.providers.length;
  var ci1 = s % hl;
  var ci2 = (s + Math.ceil(hl / 2) + 1) % hl;
  if (ci2 === ci1) { ci2 = (ci2 + 1) % hl; }
  var pi1 = s % pl;
  var pi2 = (s + Math.ceil(pl / 2) + 1) % pl;
  if (pi2 === pi1) { pi2 = (pi2 + 1) % pl; }
  return {
    kw: d.kw, dest: d.name, year: year,
    city:     pickItem(d.cities,    s),
    c1:       d.carriers[ci1],
    c2:       d.carriers[ci2],
    p1:       d.providers[pi1],
    p2:       d.providers[pi2],
    device:   pickItem(DEVICES,     s),
    dur:      pickItem(d.durations, s),
    userType: pickItem(d.userTypes, s),
    scene:    pickItem(d.scenes,    s + 2),
    topic:    pickItem(TOPICS,      s),
    cnt:      pickItem(COUNTS,      s),
    issue:    pickItem(d.issues,    s),
    park:     pickItem(d.parks,     s),
    hKw:      pickHotKw(s * 7 + 3)
  };
}
function fill(tpl, ctx) {
  var r = tpl;
  r = r.split('{kw}').join(ctx.kw);
  r = r.split('{dest}').join(ctx.dest);
  r = r.split('{year}').join(ctx.year);
  r = r.split('{city}').join(ctx.city);
  r = r.split('{c1}').join(ctx.c1);
  r = r.split('{c2}').join(ctx.c2);
  r = r.split('{p1}').join(ctx.p1);
  r = r.split('{p2}').join(ctx.p2);
  r = r.split('{device}').join(ctx.device);
  r = r.split('{dur}').join(ctx.dur);
  r = r.split('{userType}').join(ctx.userType);
  r = r.split('{scene}').join(ctx.scene);
  r = r.split('{topic}').join(ctx.topic);
  r = r.split('{cnt}').join(ctx.cnt);
  r = r.split('{issue}').join(ctx.issue);
  r = r.split('{park}').join(ctx.park);
  r = r.split('{hKw}').join(ctx.hKw || ctx.kw);
  return r;
}
function escHtml(s) {
  return String(s)
    .split('&').join('&amp;')
    .split('<').join('&lt;')
    .split('>').join('&gt;')
    .split('"').join('&quot;');
}
function deepCopy(obj) { return JSON.parse(JSON.stringify(obj)); }

// ============================================================
// å…³é”®è¯é¢æ¿
// ============================================================
function toggleKwPanel() {
  kwPanelOpen = !kwPanelOpen;
  document.getElementById('kwInputSection').style.display = kwPanelOpen ? 'block' : 'none';
  document.getElementById('kwToggleBtn').textContent = kwPanelOpen ? 'â–² æ”¶èµ·' : 'â–¼ å±•å¼€';
  if (kwPanelOpen && userKws.length > 0) {
    renderCloudInto('kwCloudExpanded', curUsedKwIndices);
    document.getElementById('kwTagAreaExpanded').style.display = 'block';
  }
}

function parseKeywords() {
  var raw = document.getElementById('kwTextarea').value.trim();
  if (!raw) { showToast('âš  è¯·å…ˆç²˜è´´å…³é”®è¯'); return; }
  var parts  = raw.split(/[\n\r,ï¼Œ;ï¼›]+/);
  var result = [];
  var seen   = {};
  for (var i = 0; i < parts.length; i++) {
    var kw = parts[i].trim();
    if (kw.length > 0 && kw.length <= 80 && !seen[kw] && result.length < 200) {
      seen[kw] = true;
      result.push(kw);
    }
  }
  if (result.length === 0) { showToast('âš  æœªè¯†åˆ«åˆ°æœ‰æ•ˆå…³é”®è¯ï¼Œè¯·æ£€æŸ¥æ ¼å¼'); return; }
  userKws = result;
  curUsedKwIndices = [];
  document.getElementById('kwParseHint').textContent = 'âœ… æˆåŠŸå¯¼å…¥ ' + result.length + ' ä¸ª';
  renderAllKwUI([]);
  showToast('âœ… æˆåŠŸè§£æå¯¼å…¥ ' + result.length + ' ä¸ªå…³é”®è¯');
  document.getElementById('btnExportKw').style.display = 'inline-flex';
}

function clearKeywords() {
  userKws = [];
  curUsedKwIndices = [];
  document.getElementById('kwTextarea').value = '';
  document.getElementById('kwParseHint').textContent = '';
  document.getElementById('btnExportKw').style.display = 'none';
  renderAllKwUI([]);
  showToast('ğŸ—‘ å…³é”®è¯åº“å·²æ¸…ç©º');
}

function exportKeywords() {
  if (!userKws.length) { return; }
  downloadFile(userKws.join('\n'), 'keywords-' + userKws.length + '.txt');
  showToast('ğŸ“¤ å…³é”®è¯å¯¼å‡ºæˆåŠŸ');
}

function classifyKws(usedIndices) {
  var usedSet = {};
  for (var i = 0; i < usedIndices.length; i++) { usedSet[usedIndices[i]] = true; }
  var result  = [];
  var cCount  = 0;
  var aCount  = 0;
  for (var i = 0; i < userKws.length; i++) {
    var type;
    if (usedSet[i]) {
      type = 'tt';
    } else if (cCount < 25) {
      type = 'ct'; cCount++;
    } else if (aCount < 35) {
      type = 'at'; aCount++;
    } else {
      type = 'st';
    }
    result.push({ kw: userKws[i], type: type, idx: i });
  }
  return result;
}

function renderCloudInto(targetId, usedIndices) {
  var classified = classifyKws(usedIndices);
  var html = '';
  for (var i = 0; i < classified.length; i++) {
    var item = classified[i];
    html += '<span class="kw-tag ' + item.type + '" title="' + escHtml(item.kw) + '">' + escHtml(item.kw) + '</span>';
  }
  var el = document.getElementById(targetId);
  if (el) { el.innerHTML = html; }
}

function renderAllKwUI(usedIndices) {
  var total = userKws.length;
  if (total === 0) {
    document.getElementById('kwBadge').style.display    = 'none';
    document.getElementById('kwNoKwHint').style.display = 'inline';
    document.getElementById('kwStatsBar').style.display = 'none';
    document.getElementById('kwTagAreaAlways').style.display = 'none';
    document.getElementById('kwTagAreaExpanded').style.display = 'none';
    document.getElementById('kwPanel').classList.remove('has-kws');
    document.getElementById('sKwCount').textContent = '0';
    return;
  }
  var classified = classifyKws(usedIndices);
  var cntTitle = 0, cntContent = 0, cntAux = 0, cntSupp = 0;
  for (var i = 0; i < classified.length; i++) {
    if      (classified[i].type === 'tt') { cntTitle++; }
    else if (classified[i].type === 'ct') { cntContent++; }
    else if (classified[i].type === 'at') { cntAux++; }
    else                                  { cntSupp++; }
  }
  document.getElementById('kwBadge').style.display    = 'inline';
  document.getElementById('kwBadge').textContent      = 'å·²å¯¼å…¥ ' + total + ' ä¸ª';
  document.getElementById('kwNoKwHint').style.display = 'none';
  document.getElementById('kwStatsBar').style.display = 'flex';
  document.getElementById('statTotal').textContent   = total;
  document.getElementById('statTitle').textContent   = cntTitle;
  document.getElementById('statContent').textContent = cntContent;
  document.getElementById('statAux').textContent     = cntAux;
  document.getElementById('statSupp').textContent    = cntSupp;
  document.getElementById('kwPanel').classList.add('has-kws');
  document.getElementById('sKwCount').textContent    = total;
  renderCloudInto('kwCloudAlways', usedIndices);
  document.getElementById('kwTagAreaAlways').style.display = 'block';
  if (kwPanelOpen) {
    renderCloudInto('kwCloudExpanded', usedIndices);
    document.getElementById('kwTagAreaExpanded').style.display = 'block';
  }
}

// ============================================================
// æ ¸å¿ƒç”Ÿæˆ
// ============================================================
function generate() {
  var destKey = document.getElementById('selDest').value;
  var year    = document.getElementById('selYear').value;
  var h2n     = parseInt(document.getElementById('selH2n').value,    10);
  var batch   = parseInt(document.getElementById('selBatch').value, 10);

  for (var b = 0; b < batch; b++) {
    var g    = genCount;
    var h1tpl = pickItem(H1T, g);
    var h1ctx = buildCtx(destKey, year, g * 17 + 5);
    var h1    = fill(h1tpl, h1ctx);

    var rot    = ROTS[g % ROTS.length];
    var selCats = [];
    for (var i = 0; i < h2n; i++) {
      if (i < rot.length) {
        selCats.push(rot[i]);
      } else {
        var alt = ROTS[(g + 1) % ROTS.length];
        selCats.push(alt[i - rot.length] || CKEYS[i % CKEYS.length]);
      }
    }

    var h2s = [];
    for (var j = 0; j < selCats.length; j++) {
      var ck   = selCats[j];
      var cat  = CATS[ck];
      var cIdx = CKEYS.indexOf(ck);
      var tIdx = (g * 3 + j * 7 + cIdx) % cat.t.length;
      var lCtx = buildCtx(destKey, year, g * 11 + j * 13 + cIdx * 5);
      h2s.push({ ck: ck, catName: cat.name, cls: cat.cls, text: fill(cat.t[tIdx], lCtx) });
    }

    genCount++;

    var allTxt   = h1 + ' ' + h2s.map(function(h) { return h.text; }).join(' ');
    var usedIdx  = [];
    for (var k = 0; k < userKws.length; k++) {
      if (allTxt.indexOf(userKws[k]) !== -1) { usedIdx.push(k); }
    }
    curUsedKwIndices = usedIdx;

    var setItem = { id: genCount, destKey: destKey, destName: DB[destKey].name,
                    year: year, h1: h1, h2s: h2s, usedKwIndices: usedIdx };
    curSet = setItem;
    hist.unshift(deepCopy(setItem));
  }

  if (userKws.length > 0) { renderAllKwUI(curUsedKwIndices); }
  renderOutput();
  renderHist();
  updateStats();
}

// ============================================================
// æ¸²æŸ“è¾“å‡ºï¼ˆå”¯ä¸€å®šä¹‰ï¼‰
// ============================================================
function renderOutput() {
  var id       = curSet.id;
  var h1       = curSet.h1;
  var h2s      = curSet.h2s;
  var usedCount = curSet.usedKwIndices ? curSet.usedKwIndices.length : 0;

  document.getElementById('genBadge').style.display      = 'inline';
  document.getElementById('genBadge').textContent        = 'ç¬¬ ' + id + ' ç»„';
  document.getElementById('btnCopySet').style.display    = 'inline-flex';
  document.getElementById('btnGenPrompt').style.display  = 'inline-flex';
  document.getElementById('cardFt').style.display        = 'flex';

  if (userKws.length > 0 && usedCount > 0) {
    document.getElementById('kwUsedBadge').style.display    = 'inline';
    document.getElementById('kwUsedBadge').textContent      = 'ğŸ”‘ å…³é”®è¯æ¤å…¥ ' + usedCount + ' ä¸ª';
  } else {
    document.getElementById('kwUsedBadge').style.display = 'none';
  }

  var h1Len = h1.length;
  var uniqueCats = [];
  for (var k = 0; k < h2s.length; k++) {
    if (uniqueCats.indexOf(h2s[k].ck) === -1) { uniqueCats.push(h2s[k].ck); }
  }
  var lenOk = (h1Len >= 30 && h1Len <= 70);

  // SEO bar
  var seoHtml = '<div class="seo-bar">'
    + '<span class="seo-tag">âœ“ å«æ ¸å¿ƒå…³é”®è¯</span>'
    + '<span class="' + (lenOk ? 'seo-tag' : 'seo-tag warn') + '">'
    + (lenOk ? 'âœ“' : 'âš ') + ' H1å­—ç¬¦ ' + h1Len + (lenOk ? ' (ä¼˜è´¨)' : ' (å»ºè®®30-70)') + '</span>'
    + '<span class="seo-tag">âœ“ è¦†ç›– ' + uniqueCats.length + ' å¤§ä¸»é¢˜</span>'
    + '<span class="seo-tag">âœ“ ä¿¡æ¯/å•†ä¸š/äº¤æ˜“æ„å›¾å…¼é¡¾</span>'
    + (userKws.length > 0
       ? '<span class="seo-tag' + (usedCount > 0 ? '' : ' warn') + '">ğŸ”‘ '
         + (usedCount > 0 ? 'å…³é”®è¯å·²æ¤å…¥æ ‡é¢˜ ' + usedCount + 'ä¸ª' : 'å…³é”®è¯å¾…åŒ¹é…') + '</span>'
       : '')
    + '</div>';

  // Keyword info bar
  var kwInfoHtml = '';
  if (userKws.length > 0) {
    var classified  = classifyKws(curSet.usedKwIndices || []);
    var cntC        = 0;
    var usedNames   = [];
    for (var i = 0; i < classified.length; i++) {
      if      (classified[i].type === 'tt') { usedNames.push(classified[i].kw); }
      else if (classified[i].type === 'ct') { cntC++; }
    }
    var tagsHtml = usedNames.slice(0, 4).map(function(n) {
      return '<span class="kw-used-tag used">' + escHtml(n) + '</span>';
    }).join('');
    if (usedNames.length > 4) {
      tagsHtml += '<span class="kw-used-tag">+' + (usedNames.length - 4) + 'ä¸ª</span>';
    }
    kwInfoHtml = '<div class="kw-info-bar">'
      + '<div class="kw-info-l"><span class="kw-info-title">ğŸ”‘ å…³é”®è¯æ¤å…¥çŠ¶æ€</span>'
      + tagsHtml
      + '<span class="kw-used-tag green">ğŸ“ å†…å®¹é‡ç‚¹è¯ ' + cntC + ' ä¸ªå¾…æ¤å…¥</span>'
      + '</div>'
      + '<span style="font-size:11px;color:#92400e">â†’ ç‚¹å‡»ã€Œç”Ÿæˆå†™ä½œPromptã€è·å–å®Œæ•´å…³é”®è¯å†™ä½œæŒ‡ä»¤</span>'
      + '</div>';
  }

  // H1 block
  var h1Html = '<div class="h1-block">'
    + '<span class="h1-lbl">H1</span>'
    + '<div><div class="h1-txt">' + escHtml(h1) + '</div>'
    + '<div class="h1-len">å­—ç¬¦æ•°ï¼š' + h1Len + '</div></div>'
    + '<button class="h1-copy" onclick="cpH1()">ğŸ“‹ å¤åˆ¶</button>'
    + '</div>';

  // H2 list
  var h2Html = '';
  for (var m = 0; m < h2s.length; m++) {
    var item = h2s[m];
    h2Html += '<div class="h2-item">'
      + '<div class="h2-num">' + (m + 1) + '</div>'
      + '<div class="h2-body">'
      + '<span class="cat-tag ' + item.cls + '">' + item.catName + '</span>'
      + '<div class="h2-txt">' + escHtml(item.text) + '</div>'
      + '<div class="h2-len">å­—ç¬¦æ•°ï¼š' + item.text.length + '</div>'
      + '</div>'
      + '<button class="h2-copy" onclick="cpH2(' + m + ')">ğŸ“‹ å¤åˆ¶</button>'
      + '</div>';
  }

  // Prompt banner
  var bannerHtml = '<div class="prompt-banner">'
    + '<div><div class="pb-txt">ğŸ“ ä¸€é”®ç”Ÿæˆ SEO å†™ä½œ Prompt</div>'
    + '<div class="pb-sub">åŸºäºæ ‡é¢˜ç»“æ„'
    + (userKws.length > 0 ? ' + ' + userKws.length + 'ä¸ªé«˜æµé‡å…³é”®è¯' : '')
    + 'ï¼Œè‡ªåŠ¨ç”Ÿæˆå®Œæ•´å†™ä½œæŒ‡ä»¤</div></div>'
    + '<button class="btn btn-purple" onclick="generatePrompt()" style="font-size:13px;padding:9px 18px">ğŸ“ ç”Ÿæˆå†™ä½œ Prompt</button>'
    + '</div>';

  document.getElementById('outputBody').innerHTML =
    seoHtml + kwInfoHtml + h1Html
    + '<div class="h2-hd">H2 å­æ ‡é¢˜ Â· å…± ' + h2s.length + ' ä¸ª</div>'
    + '<div class="h2-list">' + h2Html + '</div>'
    + bannerHtml;
}

// ============================================================
// å†å²è®°å½•
// ============================================================
function renderHist() {
  if (hist.length > 1) { document.getElementById('histSection').style.display = 'block'; }
  document.getElementById('histCount').textContent = hist.length;
  document.getElementById('btnExportAll').style.display = genCount > 0 ? 'inline-flex' : 'none';
  var limit = Math.min(hist.length, 30);
  var html  = '';
  for (var p = 0; p < limit; p++) {
    var it      = hist[p];
    var preview = '';
    for (var q = 0; q < it.h2s.length && q < 3; q++) {
      var txt = it.h2s[q].text;
      if (txt.length > 30) { txt = txt.slice(0, 30) + '...'; }
      preview += 'Â· ' + escHtml(txt) + '<br>';
    }
    html += '<div class="hist-item" onclick="viewHist(' + it.id + ')">'
      + '<div class="hist-num">ç¬¬ ' + it.id + ' ç»„ Â· ' + it.destName + ' ' + it.year
      + (it.usedKwIndices && it.usedKwIndices.length > 0 ? ' Â· ğŸ”‘' + it.usedKwIndices.length + 'ä¸ªå…³é”®è¯' : '') + '</div>'
      + '<div class="hist-h1">' + escHtml(it.h1) + '</div>'
      + '<div class="hist-prev">' + preview + '</div>'
      + '</div>';
  }
  document.getElementById('histGrid').innerHTML = html;
}

function viewHist(id) {
  for (var p = 0; p < hist.length; p++) {
    if (hist[p].id === id) {
      curSet = hist[p];
      curUsedKwIndices = curSet.usedKwIndices || [];
      if (userKws.length > 0) { renderAllKwUI(curUsedKwIndices); }
      renderOutput();
      window.scrollTo({ top: 0, behavior: 'smooth' });
      showToast('ğŸ“– æŸ¥çœ‹ç¬¬ ' + id + ' ç»„å†å²è®°å½•');
      return;
    }
  }
}

function toggleHist() {
  var c  = document.getElementById('histContent');
  var a  = document.getElementById('histArrow');
  var isOpen = c.classList.toggle('open');
  a.textContent = isOpen ? 'â–² æ”¶èµ·' : 'â–¼ å±•å¼€';
}

function updateStats() {
  document.getElementById('sGenCount').textContent = genCount;
}

// ============================================================
// å¤åˆ¶ & å¯¼å‡º
// ============================================================
function cpH1() { if (curSet) { copyText(curSet.h1); } }
function cpH2(i) { if (curSet && curSet.h2s[i]) { copyText(curSet.h2s[i].text); } }

function copySet() {
  if (!curSet) { return; }
  var t = 'ã€ç¬¬ ' + curSet.id + ' ç»„ SEOæ ‡é¢˜ | ' + curSet.destName + ' ' + curSet.year + 'ã€‘\n\n'
    + 'H1 ä¸»æ ‡é¢˜ï¼š\n' + curSet.h1 + '\n\nH2 å­æ ‡é¢˜ï¼š\n';
  for (var n = 0; n < curSet.h2s.length; n++) {
    t += (n + 1) + '. [' + curSet.h2s[n].catName + '] ' + curSet.h2s[n].text + '\n';
  }
  copyText(t);
}

function exportCurrent() {
  if (!curSet) { return; }
  var t = '=== ç¬¬ ' + curSet.id + ' ç»„ SEOæ ‡é¢˜ | ' + curSet.destName + ' ' + curSet.year + ' ===\n\n'
    + 'H1: ' + curSet.h1 + '\n\n';
  for (var n = 0; n < curSet.h2s.length; n++) {
    t += 'H2-' + (n + 1) + ' [' + curSet.h2s[n].catName + ']: ' + curSet.h2s[n].text + '\n';
  }
  downloadFile(t, 'seo-group-' + curSet.id + '.txt');
  showToast('ğŸ“¤ æœ¬ç»„æ ‡é¢˜å¯¼å‡ºæˆåŠŸ');
}

function exportAll() {
  if (!hist.length) { return; }
  var sep = '----------------------------------------------------\n';
  var t   = 'eSIM SEO æ ‡é¢˜ç”Ÿæˆè®°å½•\nå…± ' + hist.length + ' ç»„\n\n';
  for (var p = 0; p < hist.length; p++) {
    var it = hist[p];
    t += sep + 'ç¬¬ ' + it.id + ' ç»„ | ' + it.destName + ' ' + it.year + '\n' + sep;
    t += 'H1: ' + it.h1 + '\n\n';
    for (var n = 0; n < it.h2s.length; n++) {
      t += 'H2-' + (n + 1) + ' [' + it.h2s[n].catName + ']: ' + it.h2s[n].text + '\n';
    }
    t += '\n';
  }
  downloadFile(t, 'seo-all-' + hist.length + 'groups.txt');
  showToast('âœ… å·²å¯¼å‡º ' + hist.length + ' ç»„æ ‡é¢˜');
}

// ============================================================
// ç”Ÿæˆ SEO å†™ä½œ Prompt
// ============================================================
function generatePrompt() {
  if (!curSet) { showToast('âš  è¯·å…ˆç”Ÿæˆæ ‡é¢˜'); return; }

  var dk   = curSet.destKey;
  var d    = DB[dk];
  var h1   = curSet.h1;
  var h2s  = curSet.h2s;
  var dest = curSet.destName;
  var yr   = curSet.year;
  var kw   = d.kw;
  var city = pickItem(d.cities,    curSet.id);
  var c1   = pickItem(d.carriers,  curSet.id);
  var c2   = pickItem(d.carriers,  curSet.id + 3);
  if (c2 === c1) { c2 = pickItem(d.carriers, curSet.id + 4); }
  var p1 = pickItem(d.providers, curSet.id);
  var p2 = pickItem(d.providers, curSet.id + 2);
  if (p2 === p1) { p2 = pickItem(d.providers, curSet.id + 3); }

  var h2CatKeys = [];
  var seenCk    = {};
  for (var i = 0; i < h2s.length; i++) {
    if (!seenCk[h2s[i].ck]) { seenCk[h2s[i].ck] = true; h2CatKeys.push(h2s[i].ck); }
  }

  var ltPools = {
    purchase:  [dest+'eSIMåœ¨å“ªé‡Œä¹°', dest+'eSIMè´­ä¹°æ•™ç¨‹'+yr, 'å»'+dest+'å“ªä¸ªeSIMå¥½ç”¨', dest+'eSIMæ€ä¹ˆè´­ä¹°'],
    activation:[dest+'eSIMæ¿€æ´»æ­¥éª¤', dest+'eSIMæ€ä¹ˆè®¾ç½®', 'iPhoneæ¿€æ´»'+dest+'eSIM', dest+'eSIMå¼€é€šæ–¹æ³•'],
    price:     [dest+'eSIMä»·æ ¼'+yr,  dest+'eSIMå¤šå°‘é’±',   dest+'eSIMæ€§ä»·æ¯”æ¨è',     dest+'eSIMä¾¿å®œå¥—é¤'],
    coverage:  [dest+'eSIMä¿¡å·å¥½å—', dest+'eSIMç½‘é€Ÿæµ‹è¯„', dest+'eSIMè¦†ç›–èŒƒå›´',        dest+'eSIMå®æµ‹'],
    faq:       [dest+'eSIMå€¼å¾—ä¹°å—', dest+'eSIMä½¿ç”¨æ³¨æ„äº‹é¡¹', 'eSIMå’Œå®ä½“SIMå“ªä¸ªå¥½', dest+'eSIMå¸¸è§é—®é¢˜'],
    comparison:[dest+'eSIMå“ªä¸ªå¥½'+yr,dest+'eSIMå“ç‰Œå¯¹æ¯”',  p1+dest+'å¥½ç”¨å—',          dest+'eSIMæ¨è'+yr],
    provider:  [p1+dest+'eSIMè¯„æµ‹',  dest+'eSIMå“ªå®¶é è°±', dest+'eSIMæä¾›å•†æ¨è',      p2+dest+'æ€ä¹ˆæ ·'],
    scenario:  [dest+'æ—…æ¸¸eSIMæ¨è', dest+'å‡ºå·®ç½‘ç»œæ–¹æ¡ˆ', dest+'ç•™å­¦ä¸Šç½‘é€‰æ‹©',         dest+'è‡ªç”±è¡ŒeSIM'],
    tips:      [dest+'eSIMçœé’±æŠ€å·§', dest+'eSIMä½¿ç”¨æ”»ç•¥', dest+'eSIMæµé‡ä¸å¤Ÿæ€ä¹ˆåŠ',  dest+'eSIMæœ€å¤§åŒ–ä½¿ç”¨']
  };
  var ltKws  = [];
  var ltSeen = {};
  for (var i = 0; i < h2CatKeys.length; i++) {
    var pool = ltPools[h2CatKeys[i]] || [];
    for (var j = 0; j < pool.length; j++) {
      if (!ltSeen[pool[j]] && ltKws.length < 14) {
        ltSeen[pool[j]] = true; ltKws.push(pool[j]);
      }
    }
  }

  var painMap = {
    purchase:   'ğŸ“Œ è´­ä¹°æ¸ é“æ··ä¹±ï¼šä¸çŸ¥é“å“ªé‡Œèƒ½è´­ä¹°åˆ°æ­£è§„é è°±çš„'+kw+'ï¼Œæ‹…å¿ƒä¹°åˆ°å‡è´§ã€ä¸å…¼å®¹äº§å“æˆ–æ¿€æ´»å¤±è´¥',
    activation: 'ğŸ“Œ æ¿€æ´»æµç¨‹å›°éš¾ï¼šæ‹¿åˆ°'+kw+'åä¸çŸ¥å¦‚ä½•æ­£ç¡®æ¿€æ´»ï¼Œæˆ–æ¿€æ´»é€”ä¸­å‡ºç°é”™è¯¯ä»£ç å´ä¸çŸ¥æ€ä¹ˆæ’æŸ¥è§£å†³',
    price:      'ğŸ“Œ ä»·æ ¼ä¸é€æ˜ï¼šä¸æ¸…æ¥š'+dest+'eSIMçš„åˆç†ä»·ä½åŒºé—´ï¼Œæ‹…å¿ƒéšè—è´¹ç”¨ã€è¶…é¢æ‰£è´¹æˆ–ä¹°è´µåƒäº',
    coverage:   'ğŸ“Œ ä¿¡å·è´¨é‡å­˜ç–‘ï¼šä¸ç¡®å®š'+kw+'åœ¨'+dest+'åŸå¸‚ã€éƒŠåŒºã€æ™¯åŒºç­‰ä¸åŒåœ°åŒºçš„å®é™…ç½‘ç»œè¦†ç›–ä¸é€Ÿåº¦è¡¨ç°',
    faq:        'ğŸ“Œ åŸºç¡€ç–‘é—®ä¼—å¤šï¼šå¯¹eSIMèƒ½å¦æ‰“ç”µè¯ã€å…±äº«çƒ­ç‚¹ã€å¤šè®¾å¤‡ä½¿ç”¨ç­‰åŠŸèƒ½é™åˆ¶å¿ƒå­˜ç–‘æƒ‘ï¼Œä¸æ•¢è½»æ˜“ä¸‹å•',
    comparison: 'ğŸ“Œ é€‰æ‹©å›°éš¾ç—‡ï¼šé¢å¯¹'+p1+'ã€'+p2+'ç­‰å¤šå®¶å¹³å°å’Œæ•°åæ¬¾å¥—é¤ï¼Œä¸çŸ¥å¦‚ä½•ç­›é€‰æœ€é€‚åˆè‡ªå·±çš„æ–¹æ¡ˆ',
    provider:   'ğŸ“Œ å“ç‰Œä¿¡ä»»ç¼ºå¤±ï¼šä¸äº†è§£å„å¤§'+dest+'eSIMæœåŠ¡å•†çš„å£ç¢‘ã€å®¢æœè´¨é‡ä¸å”®åä¿éšœï¼Œæ‹…å¿ƒè¸©å‘',
    scenario:   'ğŸ“Œ åœºæ™¯é€‚é…æ¨¡ç³Šï¼šä¸æ¸…æ¥šè‡ªå·±æ—…æ¸¸ã€å•†åŠ¡ã€ç•™å­¦ç­‰ä¸åŒå‡ºè¡Œç›®çš„åº”é€‰å“ªç§å¥—é¤ç±»å‹ä¸æ—¶é•¿',
    tips:       'ğŸ“Œ ä½¿ç”¨æ•ˆç‡åä½ï¼šä¸çŸ¥é“å¦‚ä½•ç®¡æ§æµé‡æ¶ˆè€—ã€å¦‚ä½•ç»­è´¹ç»­æœŸï¼Œä»¥åŠå¦‚ä½•å°†å¥—é¤ä»·å€¼æœ€å¤§åŒ–'
  };
  var pains    = [];
  var painSeen = {};
  for (var i = 0; i < h2CatKeys.length; i++) {
    var ck = h2CatKeys[i];
    if (painMap[ck] && !painSeen[ck]) { painSeen[ck] = true; pains.push(painMap[ck]); }
  }

  // Keyword classification
  var titleKwNames   = [];
  var contentKwNames = [];
  var auxKwNames     = [];
  var suppKwNames    = [];
  var kwTotalCount   = 0;
  if (userKws.length > 0) {
    var classified = classifyKws(curSet.usedKwIndices || []);
    kwTotalCount   = classified.length;
    for (var i = 0; i < classified.length; i++) {
      var item = classified[i];
      if      (item.type === 'tt') { titleKwNames.push(item.kw); }
      else if (item.type === 'ct') { contentKwNames.push(item.kw); }
      else if (item.type === 'at') { auxKwNames.push(item.kw); }
      else                         { suppKwNames.push(item.kw); }
    }
  }

  var outlineStr = '';
  for (var i = 0; i < h2s.length; i++) {
    outlineStr += (i + 1) + '. ã€' + h2s[i].catName + 'ã€‘ ' + h2s[i].text + '\n';
  }
  var ltStr   = ''; for (var i = 0; i < ltKws.length; i++)  { ltStr   += '  Â· ' + ltKws[i]  + '\n'; }
  var painStr = ''; for (var i = 0; i < pains.length; i++)  { painStr += pains[i] + '\n'; }

  var sep  = '================================================================\n';
  var sep2 = '----------------------------------------------------------------\n';
  var pt   = '';

  pt += sep + '# SEO è½¯æ–‡å†™ä½œä»»åŠ¡\n' + sep + '\n';

  pt += '## ä¸€ã€è§’è‰²å®šä½\n' + sep2;
  pt += 'ä½ æ˜¯ä¸€ä½æ‹¥æœ‰ 10 å¹´ç»éªŒçš„ Google SEO å†…å®¹ä¸“å®¶ï¼Œç²¾é€šä¸­æ–‡å†…å®¹è¥é”€ï¼Œ\n';
  pt += 'æ“…é•¿æ’°å†™åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸‰ä¸ªç›®æ ‡çš„é«˜è´¨é‡è½¯æ–‡ï¼š\n';
  pt += '  1. ç¬¦åˆè°·æ­Œ E-E-A-T è´¨é‡è¯„ä¼°æ ‡å‡†ï¼Œæœ‰åŠ©äºæœç´¢æ’åæå‡\n';
  pt += '  2. çœŸæ­£è§£å†³ç›®æ ‡è¯»è€…çš„å®é™…é—®é¢˜ä¸ç—›ç‚¹ï¼Œæä¾›å¯æ“ä½œçš„å®ç”¨ä¿¡æ¯\n';
  pt += '  3. å…³é”®è¯ä¸é•¿å°¾è¯è‡ªç„¶ã€åˆç†åœ°èå…¥è¡Œæ–‡ï¼Œç»ä¸ç”Ÿç¡¬å †ç Œ\n\n';

  pt += '## äºŒã€æ–‡ç« åŸºæœ¬ä¿¡æ¯\n' + sep2;
  pt += 'ä¸»æ ‡é¢˜ï¼ˆH1ï¼‰  ï¼š' + h1 + '\n';
  pt += 'ç›®æ ‡åœ°åŒº      ï¼š' + dest + '\n';
  pt += 'å‘å¸ƒå¹´ä»½      ï¼š' + yr + '\n';
  pt += 'æ ¸å¿ƒå…³é”®è¯    ï¼š' + kw + '\n';
  pt += 'å‚è€ƒè¿è¥å•†    ï¼š' + c1 + 'ã€' + c2 + ' ç­‰\n';
  pt += 'å‚è€ƒæœåŠ¡å•†    ï¼š' + p1 + 'ã€' + p2 + ' ç­‰\n';
  pt += 'ç›®æ ‡è¯»è€…      ï¼šè®¡åˆ’å‰å¾€' + dest + 'çš„ä¸­æ–‡ç”¨æˆ·ï¼ˆæ—…è¡Œè€…ã€å•†åŠ¡å‡ºå·®äººå£«ã€ç•™å­¦ç”Ÿã€è‡ªç”±è¡Œæ—…å®¢ç­‰ï¼‰\n\n';

  pt += '## ä¸‰ã€æ–‡ç« ç»“æ„å¤§çº²ï¼ˆä¸¥æ ¼æŒ‰æ­¤å±•å¼€ï¼‰\n' + sep2;
  pt += 'ã€å¼•è¨€ã€‘ï¼ˆ100-150 å­—ï¼‰\n';
  pt += '  Â· ä»¥è¯»è€…çœŸå®åœºæ™¯æˆ–ç—›ç‚¹é—®é¢˜å¼€ç¯‡ï¼Œå‰100å­—å†…è‡ªç„¶æ¤å…¥ã€Œ' + kw + 'ã€ä¸€æ¬¡\n';
  pt += '  Â· ç®€è¦é¢„å‘Šæ–‡ç« å°†è§£å†³çš„æ ¸å¿ƒé—®é¢˜ï¼Œå¸å¼•ç»§ç»­é˜…è¯»\n\n';
  pt += outlineStr + '\n';
  pt += 'ã€ç»“å°¾æ€»ç»“ã€‘ï¼ˆ100-150 å­—ï¼‰\n';
  pt += '  Â· æç‚¼å…¨æ–‡æ ¸å¿ƒå»ºè®®ï¼ˆ3æ¡ä»¥å†…ï¼‰ï¼Œå†æ¬¡è‡ªç„¶å‘¼åº”ã€Œ' + kw + 'ã€\n';
  pt += '  Â· åŒ…å«ä¸€å¥æ¸©å’Œçš„è¡ŒåŠ¨å·å¬ï¼ˆCTAï¼‰\n\n';

  pt += '## å››ã€SEO å†™ä½œè§„èŒƒï¼ˆå¿…é¡»ä¸¥æ ¼éµå®ˆï¼‰\n' + sep2;
  pt += '\nã€4.1 æ ¸å¿ƒå…³é”®è¯å¸ƒå±€ã€‘\n';
  pt += '  Â· ã€Œ' + kw + 'ã€å…¨æ–‡è‡ªç„¶å‡ºç° 5-8 æ¬¡ï¼Œå¯†åº¦æ§åˆ¶åœ¨ 1.5%-2%\n';
  pt += '  Â· å¼•è¨€å‰100å­—ã€ç»“å°¾æ®µå„å‡ºç°ä¸€æ¬¡ï¼›æ¯ä¸ªH2ç« èŠ‚é¦–å¥å‘¼åº”è¯¥æ ‡é¢˜è¯­ä¹‰\n';
  pt += '  Â· ä»¥ä¸‹é•¿å°¾å…³é”®è¯åˆ†æ•£è‡ªç„¶èå…¥å¯¹åº”ç« èŠ‚ï¼Œæ¯ä¸ªå‡ºç° 1-2 æ¬¡ï¼š\n' + ltStr;
  pt += '\nã€4.2 æ–‡ç« ç¯‡å¹…è¦æ±‚ã€‘\n';
  pt += '  Â· å…¨æ–‡æ€»å­—æ•°ï¼š2500-3500 å­—ï¼ˆä¸å«Metaä¿¡æ¯ï¼‰\n';
  pt += '  Â· å¼•è¨€/ç»“å°¾ï¼šå„100-150å­—ï¼›æ¯ä¸ªH2ç« èŠ‚æ­£æ–‡ï¼š200-350å­—\n';
  pt += '\nã€4.3 E-E-A-T è´¨é‡æ ‡å‡†ã€‘\n';
  pt += '  Â· Experienceï¼šèå…¥çœŸå®ä½¿ç”¨åœºæ™¯ï¼Œå¦‚ã€Œåœ¨' + city + 'æœºåœºè½åœ°å...ã€\n';
  pt += '  Â· Expertiseï¼šå¼•ç”¨å…·ä½“æ•°æ®ï¼ˆä»·æ ¼åŒºé—´ã€ç½‘é€Ÿæ•°å€¼ã€è¦†ç›–èŒƒå›´ï¼‰\n';
  pt += '  Â· Authoritativenessï¼šè‡ªç„¶æåŠçœŸå®è¿è¥å•†/æœåŠ¡å•†ï¼ˆå¦‚' + c1 + 'ã€' + p1 + 'ï¼‰\n';
  pt += '  Â· Trustworthinessï¼šå®¢è§‚å‘ˆç°ä¼˜ç¼ºç‚¹ï¼Œä¸å¤¸å¤§å®£ä¼ \n';
  pt += '\nã€4.4 æ ¼å¼ä¸å¯è¯»æ€§ã€‘\n';
  pt += '  Â· åˆç†ä½¿ç”¨**åŠ ç²—**æ ‡æ³¨å…³é”®ä¿¡æ¯ï¼Œæ¯æ®µä¸è¶…è¿‡2å¤„\n';
  pt += '  Â· é€‚å½“ä½¿ç”¨æ— åºåˆ—è¡¨ï¼ˆ3-5æ¡ï¼‰ï¼Œé¿å…æ•´ç¯‡éƒ½æ˜¯åˆ—è¡¨\n';
  pt += '  Â· æ¯ä¸ªH2ç« èŠ‚ç»“å°¾å¯ç”¨ä¸€å¥"å°ç»“å¥"æ”¶æŸ\n\n';

  pt += '## äº”ã€ç”¨æˆ·æ ¸å¿ƒç—›ç‚¹ï¼ˆåœ¨å¯¹åº”ç« èŠ‚ç€é‡è§£å†³ï¼‰\n' + sep2;
  pt += painStr + '\n';

  pt += '## å…­ã€å†™ä½œé£æ ¼æŒ‡å—\n' + sep2;
  pt += '  Â· è¯­æ°”ï¼šä¸“ä¸šè€Œäº²åˆ‡ï¼Œåƒæœ‰äº²èº«ç»éªŒçš„æœ‹å‹åœ¨åˆ†äº«çœŸå®å»ºè®®\n';
  pt += '  Â· äººç§°ï¼šå¤šç”¨ã€Œä½ /æ‚¨ã€ï¼Œä»¥è¯»è€…éœ€æ±‚ä¸ºä¸­å¿ƒ\n';
  pt += '  Â· å¼€ç¯‡é’©å­ï¼šç¬¬ä¸€å¥è¯ç”¨åœºæ™¯åŒ–æˆ–é—®é¢˜å¼å¼€å¤´\n';
  pt += '  Â· ä¸¥ç¦ï¼šæœ€å¥½/ç»å¯¹/100%ä¿è¯ç­‰å¤¸å¤§è¯æ±‡ã€é‡å¤å†—ä½™å†…å®¹ã€æ— ä¸­ç”Ÿæœ‰çš„æ•°æ®\n\n';

  pt += '## ä¸ƒã€æ–‡ç« ç»“æŸåï¼Œè¯·é™„ä¸Šä»¥ä¸‹ SEO è¾…åŠ©å†…å®¹\n' + sep2;
  pt += '\nâ‘  Meta Titleï¼ˆ50-60å­—ï¼‰ï¼šåŒ…å«ã€Œ' + kw + 'ã€+å¹´ä»½ã€Œ' + yr + 'ã€+ç®€æ´ä»·å€¼ä¸»å¼ \n';
  pt += 'â‘¡ Meta æè¿°ï¼ˆ110-150å­—ï¼‰ï¼šåŒ…å«æ ¸å¿ƒå…³é”®è¯+1-2ä¸ªé•¿å°¾è¯+è¯»è€…åˆ©ç›Šç‚¹+è¡ŒåŠ¨å·å¬\n';
  pt += 'â‘¢ å›¾ç‰‡ Alt æ–‡æœ¬ï¼šæ¯ä¸ªH2ç« èŠ‚æ¨è1å¼ é…å›¾ä¸»é¢˜åŠæè¿°æ€§Altæ–‡æœ¬\n';
  pt += 'â‘£ å†…é“¾å»ºè®®ï¼ˆ2-3å¤„ï¼‰ï¼šã€å†…é“¾å»ºè®®ï¼šé”šæ–‡æœ¬ â†’ ç›®æ ‡é¡µé¢ç±»å‹ã€‘\n';
  pt += 'â‘¤ Featured Snippet ä¼˜åŒ–ï¼šQ: [é—®é¢˜] / A: [ç®€æ´ç­”æ¡ˆï¼Œ50å­—ä»¥å†…]\n\n';

  // ===== å…³é”®è¯ä¸“é¡¹ç« èŠ‚ =====
  if (userKws.length > 0) {
    pt += '## å…«ã€é«˜æµé‡å…³é”®è¯æ¤å…¥è§„èŒƒï¼ˆå…± ' + kwTotalCount + ' ä¸ªå…³é”®è¯ï¼‰\n' + sep2;
    pt += 'æœ¬æ–‡æœ‰ ' + kwTotalCount + ' ä¸ªé«˜æµé‡å…³é”®è¯éœ€è¦åˆç†æ¤å…¥ï¼Œè¯·ä¸¥æ ¼æŒ‰ä¼˜å…ˆçº§å’Œè§„åˆ™æ‰§è¡Œï¼š\n\n';

    if (titleKwNames.length > 0) {
      pt += 'ã€8.1 å·²æ¤å…¥H1/H2æ ‡é¢˜çš„å…³é”®è¯ Â· ' + titleKwNames.length + ' ä¸ªã€‘\n';
      pt += 'è¯´æ˜ï¼šè¿™äº›å…³é”®è¯å·²å‡ºç°åœ¨æ ‡é¢˜ä¸­ï¼Œæ ‡é¢˜ SEO å·²å®Œæˆã€‚\n';
      pt += 'æ­£æ–‡å¤„ç†ï¼šæ¯ä¸ªåœ¨å†…å®¹ä¸­å†è‡ªç„¶å‡ºç° 1 æ¬¡å³å¯ï¼Œæ— éœ€åˆ»æ„é‡å¤ã€‚\n';
      for (var i = 0; i < titleKwNames.length; i++) { pt += '  Â· ' + titleKwNames[i] + '\n'; }
      pt += '\n';
    }

    if (contentKwNames.length > 0) {
      pt += 'ã€8.2 â­ å†…å®¹é‡ç‚¹æ¤å…¥è¯ Â· å‰ ' + contentKwNames.length + ' ä¸ªï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰ã€‘\n';
      pt += 'è¯´æ˜ï¼šè¿™äº›æ˜¯æµé‡æœ€é«˜çš„å…³é”®è¯ï¼Œå¿…é¡»åœ¨æ–‡ç« æ­£æ–‡ä¸­åˆç†æ¤å…¥ã€‚\n';
      pt += 'æ¤å…¥è¦æ±‚ï¼š\n';
      pt += '  â‘  æ¯ä¸ªå…³é”®è¯å…¨æ–‡è‡ªç„¶å‡ºç° 1-2 æ¬¡ï¼ˆä¸è¶…è¿‡2æ¬¡ï¼‰\n';
      pt += '  â‘¡ åˆ†æ•£åœ¨ä¸åŒH2ç« èŠ‚ï¼Œä¸è¦é›†ä¸­åœ¨åŒä¸€æ®µè½\n';
      pt += '  â‘¢ å¯é€‚å½“å˜å½¢ï¼ˆåŠ åŠ©è¯ã€æ‹†åˆ†èå…¥å¥å­ï¼‰ï¼Œä¿è¯è¯­å¥æµç•…\n';
      pt += '  â‘£ ä¼˜å…ˆæ”¾åœ¨æ®µè½å‰ä¸‰å¥è¯ä¸­ï¼Œæœ‰åŠ©äºæœç´¢å¼•æ“æŠ“å–\n';
      pt += 'å…³é”®è¯åˆ—è¡¨ï¼š\n';
      for (var i = 0; i < contentKwNames.length; i++) { pt += '  Â· ' + contentKwNames[i] + '\n'; }
      pt += '\n';
    }

    if (auxKwNames.length > 0) {
      pt += 'ã€8.3 ğŸ”¹ è¾…åŠ©å…³é”®è¯ Â· ' + auxKwNames.length + ' ä¸ªï¼ˆæ¬¡çº§ä¼˜å…ˆçº§ï¼‰ã€‘\n';
      pt += 'è¯´æ˜ï¼šä½œä¸ºè¯­ä¹‰è¡¥å……ï¼Œæå‡æ–‡ç« ä¸»é¢˜ç›¸å…³æ€§å’Œé•¿å°¾è¦†ç›–ã€‚\n';
      pt += 'æ¤å…¥è¦æ±‚ï¼šä»ä¸­æ‹©ä¼˜é€‰å– 10-15 ä¸ªè‡ªç„¶èå…¥ï¼Œæ¯ä¸ªå‡ºç° 1 æ¬¡ï¼Œè¯­ä¹‰ä¸åŒ¹é…æ—¶å¯è·³è¿‡ã€‚\n';
      pt += 'å…³é”®è¯åˆ—è¡¨ï¼š\n';
      for (var i = 0; i < auxKwNames.length; i++) { pt += '  Â· ' + auxKwNames[i] + '\n'; }
      pt += '\n';
    }

    if (suppKwNames.length > 0) {
      pt += 'ã€8.4 ğŸ“š è¡¥å……è¯åº“ Â· ' + suppKwNames.length + ' ä¸ªï¼ˆèƒŒæ™¯å‚è€ƒï¼‰ã€‘\n';
      pt += 'è¯´æ˜ï¼šä½œä¸ºè¯­ä¹‰èƒŒæ™¯è¯æ±‡ï¼Œå¸®åŠ© AI ç†è§£æ–‡ç« ä¸»é¢˜å¹¿åº¦ï¼Œæ— éœ€å¼ºåˆ¶æ¤å…¥ã€‚\n';
      pt += 'å…³é”®è¯åˆ—è¡¨ï¼ˆå¯æŒ‰éœ€é€‰å–ï¼‰ï¼š\n';
      var showCount = Math.min(suppKwNames.length, 60);
      for (var i = 0; i < showCount; i++) { pt += '  Â· ' + suppKwNames[i] + '\n'; }
      if (suppKwNames.length > 60) { pt += '  ...ï¼ˆå…± ' + suppKwNames.length + ' ä¸ªï¼Œå·²æ˜¾ç¤ºå‰60ä¸ªï¼‰\n'; }
      pt += '\n';
    }

    pt += 'ã€8.5 å…³é”®è¯æ€»ä½“ä½¿ç”¨åŸåˆ™ã€‘\n';
    pt += '  â‘  æ¤å…¥ä¼˜å…ˆçº§ï¼šæ ‡é¢˜è¯ > é‡ç‚¹å†…å®¹è¯ > è¾…åŠ©è¯ > è¡¥å……è¯åº“\n';
    pt += '  â‘¡ æ‰€æœ‰å…³é”®è¯æ€»å¯†åº¦ä¸è¶…è¿‡ 2.5%ï¼Œé˜²æ­¢è¿‡åº¦ä¼˜åŒ–é™æƒ\n';
    pt += '  â‘¢ åŒä¸€å¥è¯ä¸­ä¸å‡ºç°è¶…è¿‡ 2 ä¸ªå…³é”®è¯ï¼ŒåŒä¸€æ®µè½ä¸è¶…è¿‡ 3 ä¸ª\n';
    pt += '  â‘£ è¯­ä¹‰ç›¸è¿‘çš„å…³é”®è¯å¯åˆå¹¶åœ¨åŒä¸€å¥å­ä¸­è‡ªç„¶è¡¨è¾¾\n';
    pt += '  â‘¤ ä¸ç« èŠ‚è¯­ä¹‰ä¸¥é‡ä¸ç¬¦çš„å…³é”®è¯å¯ç§»è‡³æœ€åˆé€‚ç« èŠ‚æˆ–æ”¾å¼ƒ\n';
    pt += '  â‘¥ å…³é”®è¯é¦–æ¬¡å‡ºç°æ—¶å¯åŠ ç²—ï¼Œåç»­å‡ºç°ä¿æŒæ­£å¸¸æ ¼å¼\n\n';

    pt += 'ã€8.6 å…³é”®è¯ç« èŠ‚åˆ†é…å»ºè®®ï¼ˆå‚è€ƒï¼‰ã€‘\n';
    pt += '  Â· è´­ä¹°ç±»å…³é”®è¯ â†’ è´­ä¹°æŒ‡å—ç« èŠ‚ï¼ˆå¦‚ï¼šå“ªé‡Œä¹°ã€æ€ä¹ˆè´­ä¹°ã€åœ¨å“ªé‡Œè´­ä¹°ï¼‰\n';
    pt += '  Â· æ¿€æ´»ç±»å…³é”®è¯ â†’ æ¿€æ´»æ•™ç¨‹ç« èŠ‚ï¼ˆå¦‚ï¼šæ€ä¹ˆæ¿€æ´»ã€è®¾ç½®æ•™ç¨‹ã€å¼€é€šæ–¹æ³•ï¼‰\n';
    pt += '  Â· ä»·æ ¼ç±»å…³é”®è¯ â†’ ä»·æ ¼å¯¹æ¯”ç« èŠ‚ï¼ˆå¦‚ï¼šå¤šå°‘é’±ã€ä»·æ ¼ã€æ€§ä»·æ¯”ã€å¥—é¤è´¹ç”¨ï¼‰\n';
    pt += '  Â· æµ‹è¯„ç±»å…³é”®è¯ â†’ ç½‘é€Ÿè¦†ç›–/æä¾›å•†ç« èŠ‚ï¼ˆå¦‚ï¼šå¥½ç”¨å—ã€è¯„æµ‹ã€æ¨èã€å€¼å¾—ä¹°ï¼‰\n';
    pt += '  Â· åœºæ™¯ç±»å…³é”®è¯ â†’ ä½¿ç”¨åœºæ™¯ç« èŠ‚ï¼ˆå¦‚ï¼šæ—…æ¸¸ã€å‡ºå·®ã€ç•™å­¦ã€è‡ªç”±è¡Œï¼‰\n';
    pt += '  Â· é—®é¢˜ç±»å…³é”®è¯ â†’ å¸¸è§é—®é¢˜ç« èŠ‚ï¼ˆå¦‚ï¼šæ³¨æ„äº‹é¡¹ã€ä½¿ç”¨æ–¹æ³•ã€å¸¸è§é—®é¢˜ï¼‰\n\n';
  }

  pt += sep + '## å¼€å§‹å†™ä½œ\n' + sep;
  pt += 'è¯·ä¸¥æ ¼æŒ‰ä»¥ä¸Šæ‰€æœ‰è¦æ±‚ï¼Œä»ã€å¼•è¨€ã€‘å¼€å§‹ï¼Œä¾æ¬¡å±•å¼€æ¯ä¸ª H2 ç« èŠ‚ï¼Œ\n';
  pt += 'æœ€åå†™ã€ç»“å°¾æ€»ç»“ã€‘ï¼Œç„¶åé™„ä¸Š Meta Titleã€Meta æè¿°ã€\n';
  pt += 'Alt æ–‡æœ¬å»ºè®®ã€å†…é“¾å»ºè®®å’Œ Featured Snippet ä¼˜åŒ–å†…å®¹ã€‚\n\n';
  if (userKws.length > 0) {
    pt += 'ç‰¹åˆ«æé†’ï¼šæ–‡ç« ä¸­éœ€è‡ªç„¶æ¤å…¥ ' + kwTotalCount + ' ä¸ªé«˜æµé‡å…³é”®è¯ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰ï¼Œ\n';
    pt += 'é‡ç‚¹ç¡®ä¿å‰ ' + contentKwNames.length + ' ä¸ªã€Œå†…å®¹é‡ç‚¹æ¤å…¥è¯ã€è‡ªç„¶å‡ºç°åœ¨æ­£æ–‡ä¸­ã€‚\n\n';
  }
  pt += 'æ ¸å¿ƒç›®æ ‡ï¼šæ–‡ç« è¯»èµ·æ¥æµç•…è‡ªç„¶ï¼Œå¯¹è¯»è€…çœŸæ­£æœ‰ä»·å€¼ï¼Œ\n';
  pt += '          å…³é”®è¯èå…¥æ¯«æ— è¿å’Œæ„Ÿï¼Œå®Œå…¨ç¬¦åˆè°·æ­Œè´¨é‡è¯„ä¼°æ ‡å‡†ã€‚\n';
  pt += sep;

  // Modal info bar
  var approxWords = Math.round(pt.length / 2.2);
  var infoHtml = '<span class="p-stat">ğŸ“Š Promptçº¦ ' + approxWords + ' å­—</span>'
    + '<span class="p-stat">ğŸ”‘ é•¿å°¾è¯ ' + ltKws.length + ' ä¸ª</span>'
    + '<span class="p-stat">ğŸ’¡ ç—›ç‚¹ ' + pains.length + ' æ¡</span>'
    + '<span class="p-stat">ğŸ“ H2ç« èŠ‚ ' + h2s.length + ' ä¸ª</span>'
    + '<span class="p-stat">ğŸ¯ ç›®æ ‡å­—æ•° 2500-3500</span>';
  if (userKws.length > 0) {
    infoHtml += '<span class="p-stat amber">ğŸ”‘ é«˜æµé‡è¯ ' + kwTotalCount + ' ä¸ª</span>';
    if (titleKwNames.length > 0) {
      infoHtml += '<span class="p-stat amber">ğŸ“Œ æ ‡é¢˜å·²æ¤å…¥ ' + titleKwNames.length + ' ä¸ª</span>';
    }
    infoHtml += '<span class="p-stat amber">â­ å†…å®¹é‡ç‚¹ ' + contentKwNames.length + ' ä¸ª</span>';
  }

  document.getElementById('promptInfoBar').innerHTML = infoHtml;
  document.getElementById('promptText').value        = pt;
  document.getElementById('promptModal').classList.add('open');
  document.body.style.overflow = 'hidden';
}

// ============================================================
// Modal å…³é—­
// ============================================================
function closePromptModal() {
  document.getElementById('promptModal').classList.remove('open');
  document.body.style.overflow = '';
}
function closePromptModalBg(e) {
  if (e && e.target === document.getElementById('promptModal')) { closePromptModal(); }
}
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    var modal = document.getElementById('promptModal');
    if (modal.classList.contains('open')) { closePromptModal(); }
  }
});

function copyPrompt() {
  var text = document.getElementById('promptText').value;
  if (!text) { return; }
  copyText(text);
}
function exportPrompt() {
  var text = document.getElementById('promptText').value;
  if (!text || !curSet) { return; }
  downloadFile(text, 'seo-prompt-group' + curSet.id + '-' + curSet.destName + curSet.year + '.txt');
  showToast('ğŸ“¤ Prompt å·²å¯¼å‡ºä¸º TXT æ–‡ä»¶');
}

// ============================================================
// é€šç”¨å·¥å…·
// ============================================================
function copyText(text) {
  if (navigator.clipboard && navigator.clipboard.writeText) {
    navigator.clipboard.writeText(text)
      .then(function() { showToast('âœ… å·²å¤åˆ¶åˆ°å‰ªè´´æ¿'); })
      .catch(function() { copyFallback(text); });
  } else {
    copyFallback(text);
  }
}
function copyFallback(text) {
  var ta = document.createElement('textarea');
  ta.value = text;
  ta.style.cssText = 'position:fixed;opacity:0;pointer-events:none;top:0;left:0';
  document.body.appendChild(ta);
  ta.focus(); ta.select();
  try { document.execCommand('copy'); showToast('âœ… å·²å¤åˆ¶åˆ°å‰ªè´´æ¿'); }
  catch(e) { showToast('âŒ å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å…¨é€‰å¤åˆ¶'); }
  document.body.removeChild(ta);
}
function downloadFile(text, filename) {
  var a = document.createElement('a');
  a.href     = 'data:text/plain;charset=utf-8,' + encodeURIComponent(text);
  a.download = filename;
  document.body.appendChild(a); a.click(); document.body.removeChild(a);
}
function doReset() {
  genCount = 0; curSet = null; hist = [];
  document.getElementById('sGenCount').textContent      = '0';
  document.getElementById('genBadge').style.display     = 'none';
  document.getElementById('kwUsedBadge').style.display  = 'none';
  document.getElementById('btnCopySet').style.display   = 'none';
  document.getElementById('btnGenPrompt').style.display = 'none';
  document.getElementById('cardFt').style.display       = 'none';
  document.getElementById('histSection').style.display  = 'none';
  document.getElementById('btnExportAll').style.display = 'none';
  document.getElementById('outputBody').innerHTML =
    '<div class="empty"><div class="empty-ico">âœ¨</div>'
    + '<h3>ç‚¹å‡»ã€Œç”Ÿæˆæ ‡é¢˜ã€å¼€å§‹</h3>'
    + '<p>å¯å…ˆå¯¼å…¥é«˜æµé‡å…³é”®è¯ï¼Œå…³é”®è¯å°†è‡ªåŠ¨æ¤å…¥æ ‡é¢˜å¹¶å†™å…¥SEOå†™ä½œPrompt</p></div>';
  showToast('ğŸ”„ å·²é‡ç½®æ‰€æœ‰ç”Ÿæˆè®°å½•');
}

var toastTimer = null;
function showToast(msg) {
  var el = document.getElementById('toast');
  el.textContent = msg;
  el.classList.add('show');
  if (toastTimer) { clearTimeout(toastTimer); }
  toastTimer = setTimeout(function() { el.classList.remove('show'); }, 2800);
}
</script>
</body>
</html>
